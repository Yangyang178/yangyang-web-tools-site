<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯é¢‘ç»Ÿè®¡å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 30px;
        }

        .input-section, .result-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            border: 1px solid #e9ecef;
        }

        .section-title {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #4facfe;
        }

        .textarea-container {
            position: relative;
            margin-bottom: 20px;
        }

        #textInput {
            width: 100%;
            height: 300px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.6;
            resize: vertical;
            transition: border-color 0.3s;
        }

        #textInput:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .search-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        #searchInput {
            flex: 1;
            padding: 10px 15px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
        }

        #searchInput:focus {
            outline: none;
            border-color: #4facfe;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #e9ecef;
        }

        .stat-number {
            font-size: 1.8em;
            font-weight: bold;
            color: #4facfe;
        }

        .stat-label {
            font-size: 0.9em;
            color: #666;
            margin-top: 5px;
        }

        .frequency-list {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: white;
        }

        .frequency-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .frequency-item:hover {
            background-color: #f8f9fa;
        }

        .frequency-item:last-child {
            border-bottom: none;
        }

        .word {
            font-weight: 500;
            color: #333;
        }

        .count {
            background: #4facfe;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.9em;
            font-weight: bold;
        }

        .highlight {
            background-color: #ffeb3b;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
        }

        .display-text {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
            line-height: 1.8;
            font-size: 14px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .no-data {
            text-align: center;
            color: #666;
            font-style: italic;
            padding: 40px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 20px;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
            
            .search-container {
                flex-direction: column;
            }
        }

        .frequency-list::-webkit-scrollbar {
            width: 6px;
        }

        .frequency-list::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .frequency-list::-webkit-scrollbar-thumb {
            background: #4facfe;
            border-radius: 3px;
        }

        .frequency-list::-webkit-scrollbar-thumb:hover {
            background: #3a8bfe;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“Š æ™ºèƒ½è¯é¢‘ç»Ÿè®¡å·¥å…·</h1>
            <p>é«˜è´¨é‡è¯è¯­æå–ï¼Œæ™ºèƒ½è¿‡æ»¤ï¼Œç¬¦åˆè¯­è¨€é€»è¾‘çš„è¯é¢‘åˆ†æ</p>
        </div>
        
        <div class="main-content">
            <div class="input-section">
                <h2 class="section-title">ğŸ“ æ–‡æœ¬è¾“å…¥</h2>
                
                <div class="textarea-container">
                    <textarea id="textInput" placeholder="è¯·åœ¨æ­¤å¤„ç²˜è´´æˆ–è¾“å…¥è¦åˆ†æçš„æ–‡æœ¬å†…å®¹..."></textarea>
                </div>
                
                <div class="controls">
                    <button class="btn btn-primary" onclick="analyzeText()">ğŸ” æ™ºèƒ½åˆ†æ</button>
                    <button class="btn btn-secondary" onclick="clearText()">ğŸ—‘ï¸ æ¸…ç©ºæ–‡æœ¬</button>
                </div>
                
                <div class="search-container">
                    <input type="text" id="searchInput" placeholder="è¾“å…¥è¦æŸ¥è¯¢çš„è¯è¯­...">
                    <button class="btn btn-primary" onclick="searchWord()">ğŸ” æŸ¥è¯¢</button>
                </div>
                
                <div class="stats" id="stats">
                    <div class="stat-item">
                        <div class="stat-number" id="totalChars">0</div>
                        <div class="stat-label">æ€»å­—ç¬¦æ•°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="totalWords">0</div>
                        <div class="stat-label">æœ‰æ•ˆè¯æ•°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="uniqueWords">0</div>
                        <div class="stat-label">ä¸é‡å¤è¯æ•°</div>
                    </div>
                </div>
            </div>
            
            <div class="result-section">
                <h2 class="section-title">ğŸ“ˆ æ™ºèƒ½åˆ†æç»“æœ</h2>
                
                <div class="frequency-list" id="frequencyList">
                    <div class="no-data">è¯·è¾“å…¥æ–‡æœ¬å¹¶ç‚¹å‡»"æ™ºèƒ½åˆ†æ"å¼€å§‹åˆ†æ</div>
                </div>
                
                <h3 class="section-title" style="margin-top: 30px;">ğŸ¯ é«˜äº®æ˜¾ç¤º</h3>
                <div class="display-text" id="displayText">
                    <div class="no-data">åˆ†æç»“æœå°†åœ¨æ­¤å¤„æ˜¾ç¤º</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let wordFrequency = {};
        let originalText = '';
        let currentHighlightWord = '';

        // è½¬ä¹‰æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦
        function escapeRegExp(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        // æå–è¯è¯­çš„å‡½æ•°
        function extractWords(text) {
            const words = [];
            
            // å¸¸è§åœç”¨è¯
            const stopWords = new Set([
                'çš„', 'äº†', 'åœ¨', 'æ˜¯', 'æˆ‘', 'æœ‰', 'å’Œ', 'å°±', 'ä¸', 'äºº', 'éƒ½', 'ä¸€', 'ä¸€ä¸ª', 'ä¸Š', 'ä¹Ÿ', 'å¾ˆ', 'åˆ°', 'è¯´', 'è¦', 'å»', 'ä½ ', 'ä¼š', 'ç€', 'æ²¡æœ‰', 'çœ‹', 'å¥½', 'è‡ªå·±', 'è¿™æ ·', 'é‚£ä¹ˆ', 'ä»€ä¹ˆ', 'çŸ¥é“', 'è¿™ä¸ª', 'é‚£ä¸ª', 'å¯ä»¥', 'ä½†æ˜¯', 'å› ä¸º', 'æ‰€ä»¥', 'å¦‚æœ', 'è™½ç„¶', 'ç„¶å', 'æˆ–è€…', 'è€Œä¸”', 'ä¸è¿‡', 'åªæ˜¯', 'è¿˜æ˜¯', 'å·²ç»', 'æ­£åœ¨', 'å¯èƒ½', 'åº”è¯¥', 'éœ€è¦', 'å¸Œæœ›', 'è§‰å¾—', 'è®¤ä¸º', 'å‘ç°', 'å¼€å§‹', 'ç»§ç»­', 'ç»“æŸ', 'å®Œæˆ', 'è¿›è¡Œ', 'å®ç°', 'è¾¾åˆ°', 'å¾—åˆ°', 'æˆä¸º', 'å˜æˆ', 'å‡ºç°', 'äº§ç”Ÿ', 'å½¢æˆ', 'å»ºç«‹', 'åˆ›é€ ', 'æä¾›', 'è·å¾—', 'æ¥å—', 'ä½¿ç”¨', 'åˆ©ç”¨', 'é‡‡ç”¨', 'é€‰æ‹©', 'å†³å®š', 'ç¡®å®š', 'è§£å†³', 'å¤„ç†', 'é¢å¯¹', 'é‡åˆ°', 'ç¢°åˆ°', 'å‘ç”Ÿ', 'å‡ºæ¥', 'èµ·æ¥', 'ä¸‹æ¥', 'è¿‡æ¥', 'å›æ¥', 'å¸¦æ¥', 'æ‹¿æ¥', 'åšå‡º', 'ä½œå‡º', 'ç»™å‡º', 'æå‡º', 'æŒ‡å‡º', 'è¯´å‡º', 'è®²å‡º', 'æƒ³å‡º', 'æ‰¾å‡º', 'çœ‹å‡º', 'å¬å‡º', 'æ„Ÿåˆ°', 'æ„Ÿè§‰', 'æ„Ÿå—', 'ä½“éªŒ', 'ç»å†', 'é­å—', 'æ‰¿å—', 'å¿å—', 'äº«å—', 'æ‹¥æœ‰', 'å…·æœ‰', 'å«æœ‰', 'åŒ…å«', 'æ¶‰åŠ', 'å…³äº', 'å¯¹äº', 'ç”±äº', 'åŸºäº', 'é€šè¿‡', 'ç»è¿‡', 'è¶Šè¿‡', 'è¶…è¿‡', 'è¾¾åˆ°', 'åˆ°è¾¾', 'æ¥åˆ°', 'å›åˆ°', 'èµ°åˆ°', 'è·‘åˆ°', 'é£åˆ°', 'æ¸¸åˆ°', 'çˆ¬åˆ°', 'è·³åˆ°', 'ååˆ°', 'ç«™åˆ°', 'èººåˆ°', 'ç¡åˆ°', 'é†’åˆ°', 'èµ·åˆ°', 'å€’åˆ°', 'æ”¾åˆ°', 'æ‹¿åˆ°', 'é€åˆ°', 'å¸¦åˆ°', 'æ¨åˆ°', 'æ‹‰åˆ°', 'æŠ¬åˆ°', 'ä¸¾åˆ°', 'æ‰”åˆ°', 'ä¸¢åˆ°', 'æ‰åˆ°', 'è½åˆ°', 'é™åˆ°', 'å‡åˆ°', 'æ¶¨åˆ°', 'è·Œåˆ°', 'å¢åˆ°', 'å‡åˆ°', 'åŠ åˆ°', 'ä¹˜åˆ°', 'é™¤åˆ°', 'ç­‰åˆ°', 'ç›¼åˆ°', 'ç­‰ç­‰', 'ä¹‹ç±»', 'ä»¥åŠ', 'è¿˜æœ‰', 'åŒ…æ‹¬', 'é™¤äº†', 'é™¤é', 'åªè¦', 'åªæœ‰', 'ä¸ä»…', 'ä¸ä½†', 'è€Œä¸”', 'å¹¶ä¸”', 'åŒæ—¶', 'å¦å¤–', 'æ­¤å¤–', 'å…¶æ¬¡', 'æœ€å', 'æ€»ä¹‹', 'å› æ­¤', 'æ‰€ä»¥', 'äºæ˜¯', 'ç„¶è€Œ', 'ä½†æ˜¯', 'å¯æ˜¯', 'ä¸è¿‡', 'è™½ç„¶', 'å°½ç®¡', 'å³ä½¿', 'å°±ç®—', 'å“ªæ€•', 'æ— è®º', 'ä¸ç®¡'
            ]);

            // ä¸“ä¸šæœ¯è¯­è¯å…¸ï¼ˆé«˜è´¨é‡è¯æ±‡ï¼‰
            const professionalTerms = new Set([
                'äººå·¥æ™ºèƒ½', 'æœºå™¨å­¦ä¹ ', 'æ·±åº¦å­¦ä¹ ', 'ç¥ç»ç½‘ç»œ', 'è‡ªç„¶è¯­è¨€', 'è®¡ç®—æœºç§‘å­¦', 'æ•°æ®åˆ†æ', 'ç®—æ³•ä¼˜åŒ–', 'æ¨¡å¼è¯†åˆ«', 'å›¾åƒå¤„ç†', 'è¯­éŸ³è¯†åˆ«', 'çŸ¥è¯†å›¾è°±', 'ä¸“å®¶ç³»ç»Ÿ', 'å†³ç­–æ ‘', 'æ”¯æŒå‘é‡æœº', 'éšæœºæ£®æ—', 'å·ç§¯ç¥ç»ç½‘ç»œ', 'å¾ªç¯ç¥ç»ç½‘ç»œ', 'ç”Ÿæˆå¯¹æŠ—ç½‘ç»œ', 'å¼ºåŒ–å­¦ä¹ ', 'ç›‘ç£å­¦ä¹ ', 'æ— ç›‘ç£å­¦ä¹ ', 'åŠç›‘ç£å­¦ä¹ ', 'è¿ç§»å­¦ä¹ ', 'è”é‚¦å­¦ä¹ ', 'è¾¹ç¼˜è®¡ç®—', 'äº‘è®¡ç®—', 'å¤§æ•°æ®', 'ç‰©è”ç½‘', 'åŒºå—é“¾', 'è™šæ‹Ÿç°å®', 'å¢å¼ºç°å®', 'é‡å­è®¡ç®—', 'ç”Ÿç‰©ä¿¡æ¯å­¦', 'åŸºå› å·¥ç¨‹', 'çº³ç±³æŠ€æœ¯', 'æ–°èƒ½æº', 'å¯å†ç”Ÿèƒ½æº', 'ç¯å¢ƒä¿æŠ¤', 'å¯æŒç»­å‘å±•', 'ç»¿è‰²ç»æµ', 'å¾ªç¯ç»æµ', 'æ•°å­—ç»æµ', 'å…±äº«ç»æµ', 'å¹³å°ç»æµ', 'åˆ›æ–°åˆ›ä¸š', 'ç§‘æŠ€åˆ›æ–°', 'æŠ€æœ¯åˆ›æ–°', 'äº§ä¸šå‡çº§', 'è½¬å‹å‡çº§', 'é«˜è´¨é‡å‘å±•', 'ä¾›ç»™ä¾§æ”¹é©', 'éœ€æ±‚ä¾§ç®¡ç†', 'å®è§‚è°ƒæ§', 'è´§å¸æ”¿ç­–', 'è´¢æ”¿æ”¿ç­–', 'é‡‘èç›‘ç®¡', 'é£é™©ç®¡ç†', 'æŠ•èµ„ç†è´¢', 'èµ„äº§é…ç½®', 'ä»·å€¼æŠ•èµ„', 'æˆé•¿æŠ•èµ„', 'é‡åŒ–æŠ•èµ„', 'å¯¹å†²åŸºé‡‘', 'ç§å‹Ÿè‚¡æƒ', 'é£é™©æŠ•èµ„', 'å¤©ä½¿æŠ•èµ„', 'ä¼—ç­¹èèµ„', 'äº’è”ç½‘é‡‘è', 'ç§»åŠ¨æ”¯ä»˜', 'æ•°å­—è´§å¸', 'ç”µå­å•†åŠ¡', 'ç½‘ç»œè¥é”€', 'ç¤¾äº¤åª’ä½“', 'å†…å®¹è¥é”€', 'å“ç‰Œå»ºè®¾', 'ç”¨æˆ·ä½“éªŒ', 'äº§å“è®¾è®¡', 'æœåŠ¡è®¾è®¡', 'å•†ä¸šæ¨¡å¼', 'æˆ˜ç•¥è§„åˆ’', 'ç»„ç»‡ç®¡ç†', 'äººåŠ›èµ„æº', 'ä¼ä¸šæ–‡åŒ–', 'å›¢é˜Ÿå»ºè®¾', 'é¢†å¯¼åŠ›', 'æ‰§è¡ŒåŠ›', 'æ²Ÿé€šèƒ½åŠ›', 'åˆ›æ–°èƒ½åŠ›', 'å­¦ä¹ èƒ½åŠ›', 'é€‚åº”èƒ½åŠ›', 'æŠ—å‹èƒ½åŠ›', 'æ—¶é—´ç®¡ç†', 'é¡¹ç›®ç®¡ç†', 'è´¨é‡ç®¡ç†', 'æµç¨‹ç®¡ç†', 'çŸ¥è¯†ç®¡ç†', 'ä¿¡æ¯ç®¡ç†', 'æ•°æ®ç®¡ç†', 'å®‰å…¨ç®¡ç†', 'é£é™©æ§åˆ¶', 'æˆæœ¬æ§åˆ¶', 'é¢„ç®—ç®¡ç†', 'ç»©æ•ˆè€ƒæ ¸', 'æ¿€åŠ±æœºåˆ¶', 'è–ªé…¬ä½“ç³»', 'ç¦åˆ©å¾…é‡', 'èŒä¸šå‘å±•', 'åŸ¹è®­æ•™è‚²', 'ç»ˆèº«å­¦ä¹ ', 'åœ¨çº¿æ•™è‚²', 'è¿œç¨‹æ•™è‚²', 'æ··åˆå¼å­¦ä¹ ', 'ä¸ªæ€§åŒ–å­¦ä¹ ', 'è‡ªä¸»å­¦ä¹ ', 'åˆä½œå­¦ä¹ ', 'æ¢ç©¶å­¦ä¹ ', 'é¡¹ç›®å¼å­¦ä¹ ', 'é—®é¢˜å¯¼å‘å­¦ä¹ ', 'æ¡ˆä¾‹æ•™å­¦', 'å®è·µæ•™å­¦', 'å®éªŒæ•™å­¦', 'å®ä¹ å®è®­', 'äº§æ•™èåˆ', 'æ ¡ä¼åˆä½œ', 'å›½é™…åˆä½œ', 'æ–‡åŒ–äº¤æµ', 'è¯­è¨€å­¦ä¹ ', 'è·¨æ–‡åŒ–æ²Ÿé€š'
            ]);

            // 1. ä¼˜å…ˆæå–ä¸“ä¸šæœ¯è¯­
            for (let term of professionalTerms) {
                const regex = new RegExp(term, 'g');
                const matches = text.match(regex);
                if (matches) {
                    words.push(...matches);
                }
            }

            // 2. æå–æœ‰æ„ä¹‰çš„ä¸­æ–‡è¯ç»„ï¼ˆ2-4å­—ï¼‰
            const chineseWords = text.match(/[\u4e00-\u9fa5]{2,4}/g) || [];
            const filteredChineseWords = chineseWords.filter(word => {
                // è¿‡æ»¤åœç”¨è¯
                if (stopWords.has(word)) return false;
                
                // è¿‡æ»¤é‡å¤å­—ç¬¦ï¼ˆå¦‚ï¼šå“ˆå“ˆã€å‘µå‘µï¼‰
                if (/^(.)\1+$/.test(word)) return false;
                
                // è¿‡æ»¤çº¯æ•°å­—è¯æ±‡
                if (/^\d+$/.test(word)) return false;
                
                // ä¿ç•™æœ‰æ„ä¹‰çš„è¯æ±‡
                return true;
            });
            words.push(...filteredChineseWords);

            // 3. æå–è‹±æ–‡å•è¯ï¼ˆ3å­—ç¬¦ä»¥ä¸Šï¼‰
            const englishWords = text.match(/[a-zA-Z]{3,}/g) || [];
            const filteredEnglishWords = englishWords.filter(word => {
                const lowerWord = word.toLowerCase();
                // è¿‡æ»¤å¸¸è§è‹±æ–‡åœç”¨è¯
                const englishStopWords = ['the', 'and', 'or', 'but', 'in', 'on', 'at', 'to', 'for', 'of', 'with', 'by', 'from', 'up', 'about', 'into', 'through', 'during', 'before', 'after', 'above', 'below', 'between', 'among', 'this', 'that', 'these', 'those', 'what', 'which', 'who', 'when', 'where', 'why', 'how', 'all', 'any', 'both', 'each', 'few', 'more', 'most', 'other', 'some', 'such', 'only', 'own', 'same', 'so', 'than', 'too', 'very', 'can', 'will', 'just', 'should', 'now'];
                return !englishStopWords.includes(lowerWord);
            });
            words.push(...filteredEnglishWords);

            // 4. æå–æ•°å­—+å•ä½çš„ç»„åˆ
            const numberUnits = text.match(/\d+[\u4e00-\u9fa5]{1,2}/g) || [];
            words.push(...numberUnits);

            return words;
        }

        // ç²¾ç®€é«˜æ•ˆçš„è¯è¯­è´¨é‡è¯„åˆ†å‡½æ•°
        function getWordQuality(word) {
            let score = 0;
            
            // åŸºç¡€é•¿åº¦è¯„åˆ†
            if (word.length >= 2 && word.length <= 4) {
                score += 2;
            } else {
                return 0; // é•¿åº¦ä¸ç¬¦åˆç›´æ¥æ·˜æ±°
            }
            
            // é«˜ä»·å€¼ä¸“ä¸šæœ¯è¯­è¯†åˆ«ï¼ˆè¶…é«˜åˆ†ï¼‰
            const highValueTerms = [
                'äººå·¥æ™ºèƒ½', 'æœºå™¨å­¦ä¹ ', 'æ·±åº¦å­¦ä¹ ', 'ç¥ç»ç½‘ç»œ', 'è‡ªç„¶è¯­è¨€', 'è®¡ç®—æœºç§‘å­¦',
                'æ•°æ®åˆ†æ', 'å›¾åƒè¯†åˆ«', 'è¯­éŸ³è¯†åˆ«', 'æ¨èç³»ç»Ÿ', 'æœç´¢å¼•æ“', 'äº‘è®¡ç®—',
                'å¤§æ•°æ®', 'ç‰©è”ç½‘', 'åŒºå—é“¾', 'è™šæ‹Ÿç°å®', 'å¢å¼ºç°å®', 'é‡å­è®¡ç®—',
                'ç§‘å­¦æŠ€æœ¯', 'åˆ›æ–°å‘å±•', 'æ™ºèƒ½ç³»ç»Ÿ', 'ä¿¡æ¯æŠ€æœ¯', 'ç½‘ç»œå®‰å…¨', 'è½¯ä»¶å·¥ç¨‹',
                'ç®—æ³•ä¼˜åŒ–', 'ç³»ç»Ÿè®¾è®¡', 'æ•°æ®æŒ–æ˜', 'æ¨¡å¼è¯†åˆ«', 'æ™ºèƒ½åˆ†æ', 'æŠ€æœ¯åº”ç”¨'
            ];
            
            if (highValueTerms.includes(word)) {
                score += 15; // ä¸“ä¸šæœ¯è¯­ç»™äºˆæœ€é«˜åˆ†
            }
            
            // é«˜è´¨é‡è¯æ±‡æ¨¡å¼ï¼ˆä¸¥æ ¼ç­›é€‰ï¼‰
            const highQualityPatterns = [
                /^(æ™ºèƒ½|å­¦ä¹ |æŠ€æœ¯|ç³»ç»Ÿ|å‘å±•|åˆ›æ–°|åº”ç”¨|ç ”ç©¶|åˆ†æ|è®¾è®¡|ç®¡ç†|æœåŠ¡|æ–¹æ³•|æ•°æ®|ä¿¡æ¯|ç½‘ç»œ|å¹³å°|åŠŸèƒ½|è´¨é‡|æ•ˆæœ|ä»·å€¼|ç›®æ ‡|ç¯å¢ƒ|èƒ½åŠ›|æ–¹å¼|å·¥å…·)$/,
                /^(ç§‘å­¦|å·¥ç¨‹|æ•™è‚²|ç»æµ|ç¤¾ä¼š|æ–‡åŒ–|å†å²|æœªæ¥|ç°ä»£|ä¼ ç»Ÿ|é‡è¦|ä¸»è¦|æ ¸å¿ƒ|åŸºç¡€|å…³é”®|æœ‰æ•ˆ|æˆåŠŸ|ä¼˜ç§€|å…ˆè¿›|ä¸“ä¸š)$/,
                /^(è®¡ç®—|å¤„ç†|è¯†åˆ«|æ£€æµ‹|é¢„æµ‹|ä¼˜åŒ–|æ§åˆ¶|ç›‘æ§|è¯„ä¼°|æµ‹è¯•|éªŒè¯|å®ç°|æ„å»º|å¼€å‘|è®¾è®¡|åˆ›å»º)$/
            ];
            
            for (let pattern of highQualityPatterns) {
                if (pattern.test(word)) {
                    score += 8;
                    break;
                }
            }
            
            // ä¸­ç­‰è´¨é‡è¯æ±‡æ¨¡å¼
            const mediumQualityPatterns = [
                /æœºå™¨|ç®—æ³•|æ¨¡å‹|æ¡†æ¶|æ¶æ„|ç»“æ„|æµç¨‹|è¿‡ç¨‹|æ­¥éª¤|é˜¶æ®µ|å±‚æ¬¡|çº§åˆ«|æ ‡å‡†|è§„èŒƒ|åè®®|æ¥å£/,
                /é—®é¢˜|è§£å†³|æ–¹æ¡ˆ|ç­–ç•¥|æ€è·¯|ç†å¿µ|è§‚ç‚¹|è§’åº¦|è§†è§’|å±‚é¢|ç»´åº¦|å› ç´ |æ¡ä»¶|è¦æ±‚|éœ€æ±‚/
            ];
            
            for (let pattern of mediumQualityPatterns) {
                if (pattern.test(word)) {
                    score += 4;
                    break;
                }
            }
            
            // ä¸¥æ ¼è¿‡æ»¤æ— æ„ä¹‰è¯æ±‡
            const invalidPatterns = [
                /^(.)\1+$/, // é‡å¤å­—ç¬¦
                /^[å“ˆå‘µå˜¿å—¯å•Šå“¦é¢å‘ƒå—¨å“Ÿå’¦å’¯]+$/, // è¯­æ°”è¯
                /^[çš„äº†åœ¨æ˜¯æˆ‘æœ‰å’Œå°±ä¸äººéƒ½ä¸€ä¸Šä¹Ÿå¾ˆåˆ°è¯´è¦å»ä½ ä¼šç€æ²¡çœ‹å¥½è‡ªå·±è¿™æ ·é‚£ä¹ˆä»€ä¹ˆçŸ¥é“è¿™ä¸ªé‚£ä¸ªå¯ä»¥ä½†æ˜¯å› ä¸ºæ‰€ä»¥å¦‚æœè™½ç„¶ç„¶åæˆ–è€…è€Œä¸”ä¸è¿‡åªæ˜¯è¿˜æ˜¯å·²ç»æ­£åœ¨å¯èƒ½åº”è¯¥éœ€è¦å¸Œæœ›è§‰å¾—è®¤ä¸ºå‘ç°å¼€å§‹ç»§ç»­ç»“æŸå®Œæˆè¿›è¡Œå®ç°è¾¾åˆ°å¾—åˆ°æˆä¸ºå˜æˆå‡ºç°äº§ç”Ÿå½¢æˆå»ºç«‹åˆ›é€ æä¾›è·å¾—æ¥å—ä½¿ç”¨åˆ©ç”¨é‡‡ç”¨é€‰æ‹©å†³å®šç¡®å®šè§£å†³å¤„ç†é¢å¯¹é‡åˆ°ç¢°åˆ°å‘ç”Ÿ]+$/
            ];
            
            for (let pattern of invalidPatterns) {
                if (pattern.test(word)) {
                    return 0;
                }
            }
            
            return score;
        }

        // åˆ†ææ–‡æœ¬è¯é¢‘
        function analyzeText() {
            const text = document.getElementById('textInput').value.trim();
            
            if (!text) {
                alert('è¯·å…ˆè¾“å…¥æ–‡æœ¬å†…å®¹ï¼');
                return;
            }

            originalText = text;
            wordFrequency = {};

            // æ”¹è¿›çš„åˆ†è¯é€»è¾‘ï¼šæå–æœ‰æ„ä¹‰çš„è¯è¯­
            const words = extractWords(text);
            
            // ç»Ÿè®¡è¯é¢‘å¹¶è¿›è¡Œè´¨é‡ç­›é€‰
            const wordQualityMap = {};
            const uniqueWords = [...new Set(words)];
            
            uniqueWords.forEach(word => {
                const normalizedWord = word.toLowerCase();
                const quality = getWordQuality(word);
                
                // åªä¿ç•™è´¨é‡åˆ†æ•°å¤§äºç­‰äº3çš„è¯è¯­ï¼ˆæé«˜è´¨é‡é—¨æ§›ï¼‰
                if (quality >= 3) {
                    // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åœ¨åŸæ–‡ä¸­ç²¾ç¡®è®¡æ•°ï¼Œç¡®ä¿ä¸é«˜äº®æ˜¾ç¤ºä¸€è‡´
                    const regex = new RegExp(escapeRegExp(word), 'g');
                    const matches = originalText.match(regex);
                    const actualCount = matches ? matches.length : 0;
                    
                    if (actualCount > 0) {
                        wordFrequency[normalizedWord] = actualCount;
                        wordQualityMap[normalizedWord] = quality;
                    }
                }
            });

            // é™åˆ¶è¯è¯­æ•°é‡ï¼Œåªä¿ç•™æœ€æœ‰ä»·å€¼çš„è¯æ±‡
            const sortedByQualityAndFreq = Object.entries(wordFrequency)
                .map(([word, count]) => ({
                    word,
                    count,
                    quality: wordQualityMap[word] || 0
                }))
                .sort((a, b) => {
                    // ç»¼åˆæ’åºï¼šè´¨é‡åˆ†æ•° * é¢‘æ¬¡
                    const scoreA = a.quality * a.count;
                    const scoreB = b.quality * b.count;
                    return scoreB - scoreA;
                })
                .slice(0, 50); // åªä¿ç•™å‰50ä¸ªæœ€æœ‰ä»·å€¼çš„è¯æ±‡

            // é‡æ–°æ„å»ºwordFrequencyå¯¹è±¡
            wordFrequency = {};
            sortedByQualityAndFreq.forEach(item => {
                wordFrequency[item.word] = item.count;
            });

            // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
            updateStats(text, Object.keys(wordFrequency));
            
            // æ˜¾ç¤ºè¯é¢‘åˆ—è¡¨
            displayFrequencyList();
            
            // æ˜¾ç¤ºåŸæ–‡
            displayOriginalText();
        }

        // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
        function updateStats(text, words) {
            document.getElementById('totalChars').textContent = text.length;
            document.getElementById('totalWords').textContent = words.length;
            document.getElementById('uniqueWords').textContent = Object.keys(wordFrequency).length;
        }

        // æ˜¾ç¤ºè¯é¢‘åˆ—è¡¨
        function displayFrequencyList() {
            const frequencyList = document.getElementById('frequencyList');
            
            // æŒ‰è¯é¢‘æ’åº
            const sortedWords = Object.entries(wordFrequency)
                .sort((a, b) => b[1] - a[1]);

            if (sortedWords.length === 0) {
                frequencyList.innerHTML = '<div class="no-data">æœªæ‰¾åˆ°ç¬¦åˆè´¨é‡æ ‡å‡†çš„è¯è¯­</div>';
                return;
            }

            frequencyList.innerHTML = sortedWords
                .map(([word, count]) => `
                    <div class="frequency-item" onclick="highlightWord('${word}')">
                        <span class="word">${word}</span>
                        <span class="count">${count}</span>
                    </div>
                `).join('');
        }

        // é«˜äº®æ˜¾ç¤ºæŒ‡å®šè¯è¯­
        function highlightWord(word) {
            currentHighlightWord = word;
            const displayText = document.getElementById('displayText');
            
            if (!originalText) {
                displayText.innerHTML = '<div class="no-data">è¯·å…ˆåˆ†ææ–‡æœ¬</div>';
                return;
            }

            // åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼ï¼Œå¿½ç•¥å¤§å°å†™
            const regex = new RegExp(`(${escapeRegExp(word)})`, 'gi');
            
            // è®¡ç®—å®é™…åŒ¹é…æ¬¡æ•°
            const matches = originalText.match(regex);
            const actualCount = matches ? matches.length : 0;
            
            // é«˜äº®æ˜¾ç¤º
            const highlightedText = originalText.replace(regex, '<span class="highlight">$1</span>');
            
            displayText.innerHTML = highlightedText;
            
            // æ›´æ–°è¯é¢‘åˆ—è¡¨ä¸­çš„è®¡æ•°ï¼Œç¡®ä¿ä¸€è‡´æ€§
            const frequencyItems = document.querySelectorAll('.frequency-item');
            frequencyItems.forEach(item => {
                const wordSpan = item.querySelector('.word');
                if (wordSpan && wordSpan.textContent === word) {
                    const countSpan = item.querySelector('.count');
                    if (countSpan) {
                        countSpan.textContent = actualCount;
                        // åŒæ—¶æ›´æ–°å†…å­˜ä¸­çš„è¯é¢‘æ•°æ®
                        wordFrequency[word] = actualCount;
                    }
                }
            });
            
            // æ»šåŠ¨åˆ°ç¬¬ä¸€ä¸ªé«˜äº®ä½ç½®
            const firstHighlight = displayText.querySelector('.highlight');
            if (firstHighlight) {
                firstHighlight.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        // æœç´¢æŒ‡å®šè¯è¯­
        function searchWord() {
            const searchInput = document.getElementById('searchInput');
            const word = searchInput.value.trim();
            
            if (!word) {
                alert('è¯·è¾“å…¥è¦æŸ¥è¯¢çš„è¯è¯­ï¼');
                return;
            }

            if (!originalText) {
                alert('è¯·å…ˆè¾“å…¥å¹¶åˆ†ææ–‡æœ¬ï¼');
                return;
            }

            // åœ¨åŸæ–‡ä¸­æœç´¢è¯è¯­ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰
            const regex = new RegExp(escapeRegExp(word), 'gi');
            const matches = originalText.match(regex);
            const count = matches ? matches.length : 0;
            
            if (count === 0) {
                alert(`æœªæ‰¾åˆ°è¯è¯­"${word}"ï¼`);
                return;
            }

            // é«˜äº®æ˜¾ç¤ºæœç´¢çš„è¯è¯­
            highlightWord(word);
            
            // åœ¨è¯é¢‘åˆ—è¡¨ä¸­æŸ¥æ‰¾å¹¶é«˜äº®å¯¹åº”é¡¹
            const frequencyItems = document.querySelectorAll('.frequency-item');
            let foundInList = false;
            frequencyItems.forEach(item => {
                item.style.backgroundColor = '';
                const itemWord = item.querySelector('.word').textContent;
                if (itemWord.toLowerCase() === word.toLowerCase()) {
                    item.style.backgroundColor = '#e3f2fd';
                    item.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    foundInList = true;
                }
            });

            // æ˜¾ç¤ºæŸ¥è¯¢ç»“æœ
            if (foundInList) {
                alert(`æ‰¾åˆ°è¯è¯­"${word}"ï¼Œåœ¨æ–‡ä¸­å‡ºç°${count}æ¬¡ï¼Œå·²åœ¨è¯é¢‘åˆ—è¡¨å’ŒåŸæ–‡ä¸­é«˜äº®æ˜¾ç¤º`);
            } else {
                alert(`æ‰¾åˆ°è¯è¯­"${word}"ï¼Œåœ¨æ–‡ä¸­å‡ºç°${count}æ¬¡ï¼Œå·²åœ¨åŸæ–‡ä¸­é«˜äº®æ˜¾ç¤ºï¼ˆè¯¥è¯è¯­æœªåœ¨è¯é¢‘ç»Ÿè®¡åˆ—è¡¨ä¸­ï¼‰`);
            }
            
            // æ¸…ç©ºæœç´¢æ¡†
            searchInput.value = '';
        }

        // æ˜¾ç¤ºåŸæ–‡
        function displayOriginalText() {
            const displayText = document.getElementById('displayText');
            if (currentHighlightWord) {
                highlightWord(currentHighlightWord);
            } else {
                displayText.textContent = originalText;
            }
        }

        // æ¸…ç©ºæ–‡æœ¬
        function clearText() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å†…å®¹å—ï¼Ÿ')) {
                document.getElementById('textInput').value = '';
                document.getElementById('searchInput').value = '';
                document.getElementById('frequencyList').innerHTML = '<div class="no-data">è¯·è¾“å…¥æ–‡æœ¬å¹¶ç‚¹å‡»"æ™ºèƒ½åˆ†æ"å¼€å§‹åˆ†æ</div>';
                document.getElementById('displayText').innerHTML = '<div class="no-data">åˆ†æç»“æœå°†åœ¨æ­¤å¤„æ˜¾ç¤º</div>';
                
                // é‡ç½®ç»Ÿè®¡
                document.getElementById('totalChars').textContent = '0';
                document.getElementById('totalWords').textContent = '0';
                document.getElementById('uniqueWords').textContent = '0';
                
                // é‡ç½®å˜é‡
                wordFrequency = {};
                originalText = '';
                currentHighlightWord = '';
            }
        }

        // è½¬ä¹‰æ­£åˆ™è¡¨è¾¾å¼ç‰¹æ®Šå­—ç¬¦
        function escapeRegExp(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        // å›è½¦é”®æœç´¢
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchWord();
            }
        });

        // ç¤ºä¾‹æ–‡æœ¬
        window.onload = function() {
            const exampleText = `äººå·¥æ™ºèƒ½æ˜¯è®¡ç®—æœºç§‘å­¦çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œå®ƒä¼å›¾äº†è§£æ™ºèƒ½çš„å®è´¨ï¼Œå¹¶ç”Ÿäº§å‡ºä¸€ç§æ–°çš„èƒ½ä»¥äººç±»æ™ºèƒ½ç›¸ä¼¼çš„æ–¹å¼åšå‡ºååº”çš„æ™ºèƒ½æœºå™¨ã€‚äººå·¥æ™ºèƒ½ç ”ç©¶çš„ä¸€ä¸ªä¸»è¦ç›®æ ‡æ˜¯ä½¿æœºå™¨èƒ½å¤Ÿèƒœä»»ä¸€äº›é€šå¸¸éœ€è¦äººç±»æ™ºèƒ½æ‰èƒ½å®Œæˆçš„å¤æ‚å·¥ä½œã€‚

åœ¨äººå·¥æ™ºèƒ½çš„å‘å±•å†ç¨‹ä¸­ï¼Œæœºå™¨å­¦ä¹ æ‰®æ¼”ç€é‡è¦è§’è‰²ã€‚æœºå™¨å­¦ä¹ æ˜¯äººå·¥æ™ºèƒ½çš„æ ¸å¿ƒï¼Œæ˜¯ä½¿è®¡ç®—æœºå…·æœ‰æ™ºèƒ½çš„æ ¹æœ¬é€”å¾„ã€‚æœºå™¨å­¦ä¹ çš„åº”ç”¨å·²ç»æ¸—é€åˆ°æˆ‘ä»¬ç”Ÿæ´»çš„å„ä¸ªæ–¹é¢ï¼Œä»æœç´¢å¼•æ“åˆ°æ¨èç³»ç»Ÿï¼Œä»è¯­éŸ³è¯†åˆ«åˆ°å›¾åƒå¤„ç†ã€‚

æ·±åº¦å­¦ä¹ ä½œä¸ºæœºå™¨å­¦ä¹ çš„ä¸€ä¸ªé‡è¦åˆ†æ”¯ï¼Œè¿‘å¹´æ¥å–å¾—äº†çªç ´æ€§è¿›å±•ã€‚æ·±åº¦å­¦ä¹ é€šè¿‡æ„å»ºæ·±å±‚ç¥ç»ç½‘ç»œæ¥æ¨¡æ‹Ÿäººè„‘çš„å·¥ä½œæœºåˆ¶ï¼Œåœ¨å›¾åƒè¯†åˆ«ã€è‡ªç„¶è¯­è¨€å¤„ç†ç­‰é¢†åŸŸå±•ç°å‡ºå¼ºå¤§çš„èƒ½åŠ›ã€‚

éšç€æŠ€æœ¯åˆ›æ–°çš„ä¸æ–­æ¨è¿›ï¼Œäººå·¥æ™ºèƒ½æŠ€æœ¯åœ¨å„ä¸ªè¡Œä¸šéƒ½æœ‰å¹¿æ³›åº”ç”¨ã€‚ä»æ™ºèƒ½åˆ¶é€ åˆ°æ™ºæ…§åŒ»ç–—ï¼Œä»è‡ªåŠ¨é©¾é©¶åˆ°æ™ºèƒ½å®¶å±…ï¼Œäººå·¥æ™ºèƒ½æ­£åœ¨æ”¹å˜æˆ‘ä»¬çš„ç”Ÿæ´»æ–¹å¼å’Œå·¥ä½œæ¨¡å¼ã€‚`;
            
            document.getElementById('textInput').value = exampleText;
        };
    </script>
</body>
</html>

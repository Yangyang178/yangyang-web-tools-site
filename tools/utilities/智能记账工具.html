<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智能记账工具</title>
    <!-- 引入Chart.js库 -->
    <script src="../vendor/chartjs/chart.umd.min.js"></script>
    <!-- 引入Anime.js库 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <style>
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3f37c9;
            --accent-color: #4cc9f0;
            --success-color: #4ade80;
            --danger-color: #f87171;
            --warning-color: #fbbf24;
            --info-color: #60a5fa;
            --light-color: #f8f9fa;
            --dark-color: #1e293b;
            --border-radius: 12px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--dark-color);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            color: white;
            font-size: 2.5rem;
            margin-bottom: 30px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            animation: fadeInDown 1s ease;
        }
        
        .card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: fadeInUp 0.8s ease;
        }
        
        .input-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
        }
        
        label {
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-color);
        }
        
        input, select {
            padding: 14px;
            font-size: 16px;
            border: 2px solid #e2e8f0;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
        
        .btn {
            padding: 14px 24px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: var(--box-shadow);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }
        
        .btn-primary:active {
            transform: translateY(0);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, var(--accent-color), #4895ef);
            color: white;
        }
        
        .btn-danger {
            background: linear-gradient(135deg, var(--danger-color), #ef4444);
            color: white;
        }
        
        .btn-warning {
            background: linear-gradient(135deg, var(--warning-color), #f59e0b);
            color: white;
        }
        
        .btn-info {
            background: linear-gradient(135deg, var(--info-color), #3b82f6);
            color: white;
        }
        
        .filter-section {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            align-items: end;
        }
        
        .filter-section .input-group {
            flex: 1;
            min-width: 200px;
        }
        
        .summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .summary-item {
            text-align: center;
            padding: 25px;
            border-radius: var(--border-radius);
            background: linear-gradient(135deg, #f0f4f8, #d9e2ec);
            box-shadow: var(--box-shadow);
            transition: var(--transition);
        }
        
        .summary-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
        }
        
        .summary-item.income {
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            border-left: 5px solid var(--success-color);
        }
        
        .summary-item.expense {
            background: linear-gradient(135deg, #fee2e2, #fecaca);
            border-left: 5px solid var(--danger-color);
        }
        
        .summary-item.balance {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            border-left: 5px solid var(--info-color);
        }
        
        .summary-label {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark-color);
        }
        
        .summary-value {
            font-size: 2rem;
            font-weight: 700;
        }
        
        .transaction-list {
            list-style-type: none;
            padding: 0;
        }
        
        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
            background: white;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
            border-left: 5px solid var(--primary-color);
        }
        
        .transaction-item:hover {
            transform: translateX(5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        .transaction-item.income {
            border-left-color: var(--success-color);
        }
        
        .transaction-item.expense {
            border-left-color: var(--danger-color);
        }
        
        .transaction-details {
            flex-grow: 1;
        }
        
        .transaction-category {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }
        
        .transaction-date {
            color: #64748b;
            font-size: 0.9rem;
        }
        
        .transaction-amount {
            font-weight: 700;
            font-size: 1.3rem;
            margin: 0 20px;
            min-width: 120px;
            text-align: right;
        }
        
        .income .transaction-amount {
            color: var(--success-color);
        }
        
        .expense .transaction-amount {
            color: var(--danger-color);
        }
        
        .delete-btn {
            background: linear-gradient(135deg, var(--danger-color), #ef4444);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            box-shadow: var(--box-shadow);
        }
        
        .delete-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .chart-container {
            margin: 30px 0;
        }
        
        .chart-wrapper {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 30px;
            margin-top: 20px;
        }
        
        .chart-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
        }
        
        .chart-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }
        
        .chart-title {
            text-align: center;
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--dark-color);
        }
        
        canvas {
            width: 100% !important;
            height: 300px !important;
        }
        
        @media print {
            .no-print {
                display: none;
            }
            
            body {
                background: white;
                padding: 0;
            }
            
            .card {
                box-shadow: none;
                border: 1px solid #ddd;
            }
        }
        
        @media (max-width: 768px) {
            .input-section, .filter-section {
                grid-template-columns: 1fr;
            }
            
            .summary {
                grid-template-columns: 1fr;
            }
            
            .chart-wrapper {
                grid-template-columns: 1fr;
            }
        }
        
        /* 动画关键帧 */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="pulse">智能记账工具</h1>
        
        <div class="card no-print">
            <div class="input-section">
                <div class="input-group">
                    <label for="amount">金额:</label>
                    <input type="number" id="amount" placeholder="输入金额" step="0.01">
                </div>
                <div class="input-group">
                    <label for="type">类型:</label>
                    <select id="type">
                        <option value="income">收入</option>
                        <option value="expense">支出</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="category">分类:</label>
                    <select id="category">
                        <option value="工资">工资</option>
                        <option value="奖金">奖金</option>
                        <option value="餐饮">餐饮</option>
                        <option value="交通">交通</option>
                        <option value="购物">购物</option>
                        <option value="娱乐">娱乐</option>
                        <option value="其他">其他</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="date">日期:</label>
                    <input type="date" id="date">
                </div>
                <div class="input-group">
                    <label>&nbsp;</label>
                    <button id="add-btn" class="btn btn-primary">添加记录</button>
                </div>
            </div>
        </div>
        
        <div class="card no-print">
            <div class="filter-section">
                <div class="input-group">
                    <label for="filter-type">筛选类型:</label>
                    <select id="filter-type">
                        <option value="all">全部</option>
                        <option value="income">收入</option>
                        <option value="expense">支出</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="filter-category">筛选分类:</label>
                    <select id="filter-category">
                        <option value="all">全部</option>
                        <option value="工资">工资</option>
                        <option value="奖金">奖金</option>
                        <option value="餐饮">餐饮</option>
                        <option value="交通">交通</option>
                        <option value="购物">购物</option>
                        <option value="娱乐">娱乐</option>
                        <option value="其他">其他</option>
                    </select>
                </div>
                <button id="filter-btn" class="btn btn-info">筛选</button>
                <button id="reset-btn" class="btn btn-warning">重置</button>
            </div>
        </div>
        
        <div class="card no-print">
            <button id="print-btn" class="btn btn-secondary">打印报表</button>
        </div>
        
        <div class="summary">
            <div class="summary-item income">
                <div class="summary-label">总收入</div>
                <div class="summary-value" id="total-income">¥0.00</div>
            </div>
            <div class="summary-item expense">
                <div class="summary-label">总支出</div>
            <div class="summary-value expense" id="total-expense">¥0.00</div>
        </div>
        <div class="summary-item balance">
            <div class="summary-label">结余</div>
            <div class="summary-value" id="balance">¥0.00</div>
        </div>
    </div>
    
    <!-- 图表容器 -->
    <div class="card chart-container no-print">
        <h2 style="text-align: center; color: var(--dark-color); margin-bottom: 20px;">数据可视化</h2>
        <div class="chart-wrapper">
            <div class="chart-card">
                <div class="chart-title">收支对比</div>
                <canvas id="incomeExpenseChart"></canvas>
            </div>
            <div class="chart-card">
                <div class="chart-title">分类统计</div>
                <canvas id="categoryChart"></canvas>
            </div>
        </div>
    </div>
    
    <div class="card">
        <h2 style="color: var(--dark-color); margin-bottom: 20px;">交易记录</h2>
        <ul id="transaction-list" class="transaction-list"></ul>
    </div>
    
    <script>
        // 初始化Anime.js动画库
        function initAnimations() {
            // 页面加载动画
            anime.timeline({
                easing: 'easeOutExpo',
                duration: 750
            })
            .add({
                targets: '.card',
                translateX: [40, 0],
                opacity: [0, 1],
                delay: anime.stagger(100, {start: 200})
            })
            .add({
                targets: '.summary-item',
                translateX: [-40, 0],
                opacity: [0, 1],
                delay: anime.stagger(100, {start: 600}),
                offset: '-=500'
            });
            
            // 按钮点击动画
            document.querySelectorAll('.btn').forEach(button => {
                button.addEventListener('click', function() {
                    anime({
                        targets: this,
                        scale: 0.95,
                        duration: 100,
                        direction: 'alternate',
                        easing: 'easeInOutSine'
                    });
                });
            });
            
            // 交易项添加动画
            const observer = new MutationObserver(function(mutations) {
                mutations.forEach(function(mutation) {
                    if (mutation.type === 'childList') {
                        mutation.addedNodes.forEach(function(node) {
                            if (node.nodeType === 1 && node.classList.contains('transaction-item')) {
                                anime({
                                    targets: node,
                                    translateX: [-20, 0],
                                    opacity: [0, 1],
                                    duration: 500,
                                    easing: 'easeOutQuad'
                                });
                            }
                        });
                    }
                });
            });
            
            observer.observe(document.getElementById('transaction-list'), { childList: true });
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化动画
            initAnimations();
            
            // 设置默认日期为今天
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('date').value = today;
            
            const amountInput = document.getElementById('amount');
            const typeSelect = document.getElementById('type');
            const categorySelect = document.getElementById('category');
            const dateInput = document.getElementById('date');
            const addBtn = document.getElementById('add-btn');
            const printBtn = document.getElementById('print-btn');
            const transactionList = document.getElementById('transaction-list');
            const totalIncomeEl = document.getElementById('total-income');
            const totalExpenseEl = document.getElementById('total-expense');
            const balanceEl = document.getElementById('balance');
            const filterType = document.getElementById('filter-type');
            const filterCategory = document.getElementById('filter-category');
            const filterBtn = document.getElementById('filter-btn');
            const resetBtn = document.getElementById('reset-btn');
            
            // 添加记录
            addBtn.addEventListener('click', function() {
                const amount = parseFloat(amountInput.value);
                const type = typeSelect.value;
                const category = categorySelect.value;
                const date = dateInput.value;
                
                if (isNaN(amount) || amount <= 0) {
                    alert('请输入有效的金额');
                    // 添加错误动画
                    anime({
                        targets: amountInput,
                        keyframes: [
                            {translateX: -5},
                            {translateX: 5},
                            {translateX: 0}
                        ],
                        duration: 300,
                        easing: 'easeInOutQuad'
                    });
                    return;
                }
                
                if (!date) {
                    alert('请选择日期');
                    // 添加错误动画
                    anime({
                        targets: dateInput,
                        keyframes: [
                            {translateX: -5},
                            {translateX: 5},
                            {translateX: 0}
                        ],
                        duration: 300,
                        easing: 'easeInOutQuad'
                    });
                    return;
                }
                
                addTransaction({ amount, type, category, date });
                amountInput.value = '';
                saveTransactions();
                updateSummary();
            });
            
            // 打印功能
            printBtn.addEventListener('click', function() {
                // 添加点击动画
                anime({
                    targets: this,
                    scale: [1, 0.95, 1],
                    duration: 300,
                    easing: 'easeInOutQuad'
                });
                
                window.print();
            });
            
            // 筛选功能
            filterBtn.addEventListener('click', function() {
                // 添加点击动画
                anime({
                    targets: this,
                    scale: [1, 0.95, 1],
                    duration: 300,
                    easing: 'easeInOutQuad'
                });
                
                loadTransactions();
            });
            
            // 重置筛选
            resetBtn.addEventListener('click', function() {
                // 添加点击动画
                anime({
                    targets: this,
                    scale: [1, 0.95, 1],
                    duration: 300,
                    easing: 'easeInOutQuad'
                });
                
                filterType.value = 'all';
                filterCategory.value = 'all';
                loadTransactions();
            });
            
            // 加载保存的记录
            loadTransactions();
            updateSummary();
            // 初始化图表
            renderCharts();
            
            function addTransaction(transaction) {
                const li = document.createElement('li');
                li.className = `transaction-item ${transaction.type}`;
                
                const detailsDiv = document.createElement('div');
                detailsDiv.className = 'transaction-details';
                detailsDiv.innerHTML = `
                    <div class="transaction-category">${transaction.category}</div>
                    <div class="transaction-date">${transaction.date}</div>
                `;
                
                const amountDiv = document.createElement('div');
                amountDiv.className = `transaction-amount ${transaction.type}`;
                amountDiv.textContent = `${transaction.type === 'income' ? '+' : '-'}¥${transaction.amount.toFixed(2)}`;
                
                const deleteBtn = document.createElement('button');
                deleteBtn.textContent = '删除';
                deleteBtn.className = 'delete-btn no-print';
                deleteBtn.addEventListener('click', function() {
                    // 添加删除动画
                    anime({
                        targets: li,
                        translateX: 20,
                        opacity: 0,
                        duration: 300,
                        easing: 'easeInOutQuad',
                        complete: function() {
                            li.remove();
                            saveTransactions();
                            updateSummary();
                        }
                    });
                });
                
                li.appendChild(detailsDiv);
                li.appendChild(amountDiv);
                li.appendChild(deleteBtn);
                transactionList.appendChild(li);
            }
            
            function saveTransactions() {
                const transactions = [];
                document.querySelectorAll('.transaction-item').forEach(function(item) {
                    const type = item.classList.contains('income') ? 'income' : 'expense';
                    const category = item.querySelector('.transaction-category').textContent;
                    const date = item.querySelector('.transaction-date').textContent;
                    const amountText = item.querySelector('.transaction-amount').textContent;
                    const amount = parseFloat(amountText.replace(/[^0-9.-]+/g, ""));
                    
                    transactions.push({ amount, type, category, date });
                });
                localStorage.setItem('transactions', JSON.stringify(transactions));
            }
            
            function loadTransactions() {
                transactionList.innerHTML = '';
                const savedTransactions = localStorage.getItem('transactions');
                const filterTypeValue = filterType.value;
                const filterCategoryValue = filterCategory.value;
                
                if (savedTransactions) {
                    JSON.parse(savedTransactions).forEach(function(transaction) {
                        // 应用筛选条件
                        if ((filterTypeValue === 'all' || transaction.type === filterTypeValue) &&
                            (filterCategoryValue === 'all' || transaction.category === filterCategoryValue)) {
                            addTransaction(transaction);
                        }
                    });
                }
            }
            
            function updateSummary() {
                const savedTransactions = localStorage.getItem('transactions');
                let totalIncome = 0;
                let totalExpense = 0;
                
                if (savedTransactions) {
                    JSON.parse(savedTransactions).forEach(function(transaction) {
                        if (transaction.type === 'income') {
                            totalIncome += transaction.amount;
                        } else {
                            totalExpense += transaction.amount;
                        }
                    });
                }
                
                const balance = totalIncome - totalExpense;
                
                // 添加数字动画效果
                animateValue(totalIncomeEl, parseFloat(totalIncomeEl.textContent.replace(/[^0-9.-]+/g, "")), totalIncome, 500);
                animateValue(totalExpenseEl, parseFloat(totalExpenseEl.textContent.replace(/[^0-9.-]+/g, "")), totalExpense, 500);
                animateValue(balanceEl, parseFloat(balanceEl.textContent.replace(/[^0-9.-]+/g, "")), balance, 500);
                
                // 更新图表
                renderCharts();
            }
            
            // 数字动画函数
            function animateValue(element, start, end, duration) {
                const range = end - start;
                let current = start;
                const increment = end > start ? 1 : -1;
                const stepTime = Math.abs(Math.floor(duration / range));
                const obj = element;
                
                const timer = setInterval(function() {
                    current += increment;
                    obj.textContent = `¥${current.toFixed(2)}`;
                    
                    if (current === end) {
                        clearInterval(timer);
                        obj.textContent = `¥${end.toFixed(2)}`;
                    }
                }, stepTime);
            }
            
            // 渲染图表
            function renderCharts() {
                const savedTransactions = localStorage.getItem('transactions');
                let transactions = [];
                
                if (savedTransactions) {
                    transactions = JSON.parse(savedTransactions);
                }
                
                // 渲染收支对比饼图
                renderIncomeExpenseChart(transactions);
                
                // 渲染分类统计柱状图
                renderCategoryChart(transactions);
            }
            
            // 渲染收支对比饼图
            function renderIncomeExpenseChart(transactions) {
                // 销毁已存在的图表实例
                if (window.incomeExpenseChart && typeof window.incomeExpenseChart.destroy === 'function') {
                    window.incomeExpenseChart.destroy();
                }
                
                const ctx = document.getElementById('incomeExpenseChart').getContext('2d');
                
                // 计算总收入和总支出
                let totalIncome = 0;
                let totalExpense = 0;
                
                transactions.forEach(function(transaction) {
                    if (transaction.type === 'income') {
                        totalIncome += transaction.amount;
                    } else {
                        totalExpense += transaction.amount;
                    }
                });
                
                // 如果没有数据，显示提示
                if (totalIncome === 0 && totalExpense === 0) {
                    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
                    ctx.font = '16px Arial';
                    ctx.fillStyle = '#666';
                    ctx.textAlign = 'center';
                    ctx.fillText('暂无数据', ctx.canvas.width / 2, ctx.canvas.height / 2);
                    return;
                }
                
                window.incomeExpenseChart = new Chart(ctx, {
                    type: 'pie',
                    data: {
                        labels: ['收入', '支出'],
                        datasets: [{
                            data: [totalIncome, totalExpense],
                            backgroundColor: [
                                'var(--income-color)',
                                'var(--expense-color)'
                            ],
                            borderColor: [
                                'var(--income-dark-color)',
                                'var(--expense-dark-color)'
                            ],
                            borderWidth: 1,
                            hoverOffset: 4
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'top',
                                labels: {
                                    font: {
                                        size: 14
                                    }
                                }
                            },
                            title: {
                                display: false
                            }
                        },
                        animation: {
                            animateRotate: true,
                            animateScale: true
                        }
                    }
                });
            }
            
            // 渲染分类统计柱状图
            function renderCategoryChart(transactions) {
                // 销毁已存在的图表实例
                if (window.categoryChart && typeof window.categoryChart.destroy === 'function') {
                    window.categoryChart.destroy();
                }
                
                const ctx = document.getElementById('categoryChart').getContext('2d');
                
                // 按分类统计金额
                const categoryData = {};
                
                transactions.forEach(function(transaction) {
                    const key = `${transaction.type}-${transaction.category}`;
                    if (!categoryData[key]) {
                        categoryData[key] = 0;
                    }
                    categoryData[key] += transaction.amount;
                });
                
                // 分离收入和支出分类
                const incomeCategories = {};
                const expenseCategories = {};
                
                for (const key in categoryData) {
                    const [type, category] = key.split('-');
                    if (type === 'income') {
                        incomeCategories[category] = categoryData[key];
                    } else {
                        expenseCategories[category] = categoryData[key];
                    }
                }
                
                // 如果没有数据，显示提示
                if (Object.keys(incomeCategories).length === 0 && Object.keys(expenseCategories).length === 0) {
                    ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
                    ctx.font = '16px Arial';
                    ctx.fillStyle = '#666';
                    ctx.textAlign = 'center';
                    ctx.fillText('暂无数据', ctx.canvas.width / 2, ctx.canvas.height / 2);
                    return;
                }
                
                // 准备图表数据
                const categories = Array.from(new Set([
                    ...Object.keys(incomeCategories),
                    ...Object.keys(expenseCategories)
                ]));
                
                const incomeData = categories.map(category => incomeCategories[category] || 0);
                const expenseData = categories.map(category => expenseCategories[category] || 0);
                
                window.categoryChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: categories,
                        datasets: [
                            {
                                label: '收入',
                                data: incomeData,
                                backgroundColor: 'var(--income-color)',
                                borderColor: 'var(--income-dark-color)',
                                borderWidth: 1
                            },
                            {
                                label: '支出',
                                data: expenseData,
                                backgroundColor: 'var(--expense-color)',
                                borderColor: 'var(--expense-dark-color)',
                                borderWidth: 1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'top',
                                labels: {
                                    font: {
                                        size: 14
                                    }
                                }
                            },
                            title: {
                                display: false
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                grid: {
                                    color: 'rgba(0, 0, 0, 0.05)'
                                }
                            },
                            x: {
                                grid: {
                                    display: false
                                }
                            }
                        },
                        animation: {
                            onComplete: function() {
                                // 图表加载完成动画
                                anime({
                                    targets: this.chart.ctx.canvas,
                                    opacity: [0, 1],
                                    duration: 1000,
                                    easing: 'easeOutQuad'
                                });
                            }
                        }
                    }
                });
            }
        });
    </script>
</body>
</html>

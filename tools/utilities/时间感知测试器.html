<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¶é—´æ„ŸçŸ¥æµ‹è¯•å™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            width: 100%;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        h1 {
            color: #333;
            margin-bottom: 10px;
            font-size: 2.5em;
            font-weight: 700;
        }

        .subtitle {
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .mode-selector {
            margin-bottom: 30px;
        }

        .mode-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }

        .mode-btn {
            padding: 10px 20px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .mode-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .mode-btn.active {
            background: #667eea;
            color: white;
        }

        .test-area {
            margin: 30px 0;
            padding: 30px;
            border-radius: 15px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        .timer-display {
            font-size: 4em;
            font-weight: bold;
            color: #333;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
        }

        .status-display {
            text-align: center;
            margin: 20px 0;
        }

        .test-status {
            font-size: 2.5em;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .target-time-display {
            font-size: 1.3em;
            color: #666;
            font-weight: 600;
        }

        .custom-duration-input {
            margin-top: 15px;
            display: flex;
            gap: 10px;
            justify-content: center;
            align-items: center;
        }

        .custom-duration-input input {
            padding: 10px 15px;
            border: 2px solid #667eea;
            border-radius: 25px;
            font-size: 1em;
            width: 150px;
            text-align: center;
        }

        .custom-duration-input input:focus {
            outline: none;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.3);
        }

        .instruction {
            font-size: 1.2em;
            color: #555;
            margin: 20px 0;
            line-height: 1.6;
        }

        .control-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #f8f9fa;
            color: #333;
            border: 2px solid #dee2e6;
        }

        .btn-secondary:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .result-area {
            margin-top: 30px;
            padding: 20px;
            border-radius: 15px;
            background: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .accuracy-display {
            font-size: 2em;
            font-weight: bold;
            margin: 15px 0;
        }

        .accuracy-excellent { color: #28a745; }
        .accuracy-good { color: #17a2b8; }
        .accuracy-fair { color: #ffc107; }
        .accuracy-poor { color: #dc3545; }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .stat-label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
        }

        .history {
            margin-top: 30px;
            text-align: left;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .history-header h3 {
            margin: 0;
        }

        .clear-history-btn {
            padding: 8px 16px;
            font-size: 0.9em;
            min-width: auto;
        }

        .history-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .hidden {
            display: none;
        }

        .contact-section {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
        }

        .contact-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .contact-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255, 107, 107, 0.4);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            position: relative;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            position: absolute;
            right: 20px;
            top: 15px;
        }

        .close:hover,
        .close:focus {
            color: #000;
        }

        .modal h2 {
            color: #333;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.8rem;
        }

        .contact-info {
            margin: 20px 0;
        }

        .contact-item {
            display: flex;
            align-items: center;
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .contact-item i {
            font-size: 1.5rem;
            margin-right: 15px;
            color: #667eea;
        }

        .contact-item strong {
            color: #333;
            margin-right: 10px;
        }

        .contact-item span {
            color: #666;
            font-family: 'Courier New', monospace;
        }

        .contact-message {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
            font-weight: 500;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
            }

            h1 {
                font-size: 2em;
            }

            .timer-display {
                font-size: 3em;
            }

            .mode-buttons {
                flex-direction: column;
                align-items: center;
            }

            .control-buttons {
                flex-direction: column;
                align-items: center;
            }

            .stats {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>â±ï¸ æ—¶é—´æ„ŸçŸ¥æµ‹è¯•å™¨</h1>
        <p class="subtitle">æµ‹è¯•å¹¶æé«˜æ‚¨å¯¹æ—¶é—´çš„æ„ŸçŸ¥å‡†ç¡®æ€§</p>

        <div class="mode-selector">
            <h3>é€‰æ‹©æµ‹è¯•æ—¶é•¿</h3>
            <div class="mode-buttons">
                <button class="mode-btn active" data-duration="5">5ç§’</button>
                <button class="mode-btn" data-duration="10">10ç§’</button>
                <button class="mode-btn" data-duration="15">15ç§’</button>
                <button class="mode-btn" data-duration="30">30ç§’</button>
                <button class="mode-btn" data-duration="60">1åˆ†é’Ÿ</button>
                <button class="mode-btn" data-duration="custom">è‡ªå®šä¹‰</button>
            </div>
            <div id="custom-duration-input" class="custom-duration-input hidden">
                <input type="number" id="custom-seconds" placeholder="è¾“å…¥ç§’æ•°" min="1" max="300" value="20">
                <button id="set-custom-btn" class="btn btn-secondary">ç¡®å®š</button>
            </div>
        </div>

        <div class="test-area">
            <div id="status-display" class="status-display">
                <div id="test-status" class="test-status">å‡†å¤‡å¼€å§‹æµ‹è¯•</div>
                <div id="target-time-display" class="target-time-display">ç›®æ ‡æ—¶é•¿ï¼š5ç§’</div>
            </div>
            <div id="instruction" class="instruction">
                ç‚¹å‡»"å¼€å§‹æµ‹è¯•"æŒ‰é’®ï¼Œç„¶ååœ¨æ‚¨è®¤ä¸ºè¾¾åˆ°æŒ‡å®šæ—¶é—´æ—¶ç‚¹å‡»"åœæ­¢"æŒ‰é’®
            </div>
            <div class="control-buttons">
                <button id="start-btn" class="btn btn-primary">å¼€å§‹æµ‹è¯•</button>
                <button id="stop-btn" class="btn btn-secondary" disabled>åœæ­¢</button>
                <button id="reset-btn" class="btn btn-secondary">é‡ç½®</button>
            </div>
        </div>

        <div id="result-area" class="result-area hidden">
            <h3>æµ‹è¯•ç»“æœ</h3>
            <div id="accuracy-display" class="accuracy-display"></div>
            <div id="result-details"></div>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-label">æ€»æµ‹è¯•æ¬¡æ•°</div>
                <div id="total-tests" class="stat-value">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">å¹³å‡å‡†ç¡®ç‡</div>
                <div id="avg-accuracy" class="stat-value">0%</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">æœ€ä½³å‡†ç¡®ç‡</div>
                <div id="best-accuracy" class="stat-value">0%</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">è¿ç»­æ”¹è¿›</div>
                <div id="improvement-streak" class="stat-value">0</div>
            </div>
        </div>

        <div class="history">
            <div class="history-header">
                <h3>æµ‹è¯•å†å²</h3>
                <button id="clear-history-btn" class="btn btn-secondary clear-history-btn">æ¸…é™¤å†å²</button>
            </div>
            <div id="history-list"></div>
        </div>

        <!-- è”ç³»æˆ‘ä»¬æŒ‰é’® -->
        <div class="contact-section">
            <button class="contact-btn" onclick="openContactModal()">
                ğŸ“ è”ç³»æˆ‘ä»¬
            </button>
        </div>
    </div>

    <script>
        class TimePerceptionTester {
            constructor() {
                this.currentDuration = 5;
                this.startTime = null;
                this.endTime = null;
                this.isRunning = false;
                this.timer = null;
                this.elapsedTime = 0;
                this.testHistory = JSON.parse(localStorage.getItem('timePerceptionHistory') || '[]');
                
                this.initializeElements();
                this.bindEvents();
                this.updateStats();
                this.updateHistory();
            }

            initializeElements() {
                this.statusDisplay = document.getElementById('status-display');
                this.testStatus = document.getElementById('test-status');
                this.targetTimeDisplay = document.getElementById('target-time-display');
                this.instruction = document.getElementById('instruction');
                this.startBtn = document.getElementById('start-btn');
                this.stopBtn = document.getElementById('stop-btn');
                this.resetBtn = document.getElementById('reset-btn');
                this.resultArea = document.getElementById('result-area');
                this.accuracyDisplay = document.getElementById('accuracy-display');
                this.resultDetails = document.getElementById('result-details');
                this.modeButtons = document.querySelectorAll('.mode-btn');
                this.customDurationInput = document.getElementById('custom-duration-input');
                this.customSecondsInput = document.getElementById('custom-seconds');
                this.setCustomBtn = document.getElementById('set-custom-btn');
                this.clearHistoryBtn = document.getElementById('clear-history-btn');
            }

            bindEvents() {
                this.modeButtons.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const duration = e.target.dataset.duration;
                        if (duration === 'custom') {
                            this.showCustomInput();
                        } else {
                            this.selectMode(parseInt(duration));
                        }
                    });
                });

                this.setCustomBtn.addEventListener('click', () => {
                    const customDuration = parseInt(this.customSecondsInput.value);
                    if (customDuration && customDuration >= 1 && customDuration <= 300) {
                        this.selectMode(customDuration, true);
                        this.hideCustomInput();
                    } else {
                        alert('è¯·è¾“å…¥1-300ä¹‹é—´çš„æœ‰æ•ˆç§’æ•°');
                    }
                });

                this.customSecondsInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        this.setCustomBtn.click();
                    }
                });

                this.clearHistoryBtn.addEventListener('click', () => {
                    this.clearHistory();
                });

                this.startBtn.addEventListener('click', () => this.startTest());
                this.stopBtn.addEventListener('click', () => this.stopTest());
                this.resetBtn.addEventListener('click', () => this.resetTest());
            }

            selectMode(duration, isCustom = false) {
                this.currentDuration = duration;
                this.modeButtons.forEach(btn => btn.classList.remove('active'));
                
                if (isCustom) {
                    document.querySelector('[data-duration="custom"]').classList.add('active');
                } else {
                    document.querySelector(`[data-duration="${duration}"]`).classList.add('active');
                }
                
                this.resetTest();
                this.updateTargetDisplay();
                this.instruction.textContent = `ç‚¹å‡»"å¼€å§‹æµ‹è¯•"æŒ‰é’®ï¼Œç„¶ååœ¨æ‚¨è®¤ä¸ºè¿‡äº†${duration}ç§’æ—¶ç‚¹å‡»"åœæ­¢"æŒ‰é’®`;
            }

            showCustomInput() {
                this.customDurationInput.classList.remove('hidden');
                this.customSecondsInput.focus();
            }

            hideCustomInput() {
                this.customDurationInput.classList.add('hidden');
            }

            updateTargetDisplay() {
                this.targetTimeDisplay.textContent = `ç›®æ ‡æ—¶é•¿ï¼š${this.currentDuration}ç§’`;
            }

            startTest() {
                this.startTime = Date.now();
                this.isRunning = true;
                
                this.startBtn.disabled = true;
                this.stopBtn.disabled = false;
                this.resetBtn.disabled = true;
                
                this.testStatus.textContent = 'æ­£åœ¨æµ‹è¯•...';
                this.testStatus.style.color = '#667eea';
                this.instruction.textContent = `å½“æ‚¨è®¤ä¸ºè¿‡äº†${this.currentDuration}ç§’æ—¶ï¼Œè¯·ç‚¹å‡»åœæ­¢æŒ‰é’®`;
                this.resultArea.classList.add('hidden');
            }

            stopTest() {
                if (!this.isRunning) return;
                
                this.endTime = Date.now();
                this.isRunning = false;
                
                this.startBtn.disabled = false;
                this.stopBtn.disabled = true;
                this.resetBtn.disabled = false;
                
                this.testStatus.textContent = 'æµ‹è¯•å®Œæˆ';
                this.testStatus.style.color = '#28a745';
                
                const actualTime = (this.endTime - this.startTime) / 1000;
                this.calculateResult(actualTime);
            }

            resetTest() {
                this.isRunning = false;
                this.startTime = null;
                this.endTime = null;
                
                this.startBtn.disabled = false;
                this.stopBtn.disabled = true;
                this.resetBtn.disabled = false;
                
                this.testStatus.textContent = 'å‡†å¤‡å¼€å§‹æµ‹è¯•';
                this.testStatus.style.color = '#333';
                this.instruction.textContent = `ç‚¹å‡»"å¼€å§‹æµ‹è¯•"æŒ‰é’®ï¼Œç„¶ååœ¨æ‚¨è®¤ä¸ºè¿‡äº†${this.currentDuration}ç§’æ—¶ç‚¹å‡»"åœæ­¢"æŒ‰é’®`;
                this.resultArea.classList.add('hidden');
            }

            updateDisplay() {
                // ç§»é™¤äº†è®¡æ—¶å™¨æ˜¾ç¤ºåŠŸèƒ½ï¼Œè®©ç”¨æˆ·å®Œå…¨ä¾é å†…åœ¨æ—¶é—´æ„ŸçŸ¥
            }

            calculateResult(actualTime) {
                const targetTime = this.currentDuration;
                const difference = Math.abs(actualTime - targetTime);
                const accuracy = Math.max(0, 100 - (difference / targetTime) * 100);
                
                // ä¿å­˜æµ‹è¯•ç»“æœ
                const result = {
                    timestamp: new Date().toISOString(),
                    targetTime: targetTime,
                    actualTime: actualTime,
                    accuracy: accuracy,
                    difference: difference
                };
                
                this.testHistory.unshift(result);
                if (this.testHistory.length > 50) {
                    this.testHistory = this.testHistory.slice(0, 50);
                }
                
                localStorage.setItem('timePerceptionHistory', JSON.stringify(this.testHistory));
                
                this.displayResult(result);
                this.updateStats();
                this.updateHistory();
            }

            displayResult(result) {
                const { targetTime, actualTime, accuracy, difference } = result;
                
                // æ˜¾ç¤ºå‡†ç¡®ç‡
                let accuracyClass = 'accuracy-poor';
                let accuracyText = 'éœ€è¦æ”¹è¿›';
                
                if (accuracy >= 90) {
                    accuracyClass = 'accuracy-excellent';
                    accuracyText = 'ä¼˜ç§€ï¼';
                } else if (accuracy >= 75) {
                    accuracyClass = 'accuracy-good';
                    accuracyText = 'è‰¯å¥½';
                } else if (accuracy >= 60) {
                    accuracyClass = 'accuracy-fair';
                    accuracyText = 'ä¸€èˆ¬';
                }
                
                this.accuracyDisplay.className = `accuracy-display ${accuracyClass}`;
                this.accuracyDisplay.textContent = `${accuracy.toFixed(1)}% - ${accuracyText}`;
                
                // æ˜¾ç¤ºè¯¦ç»†ç»“æœ
                const isEarly = actualTime < targetTime;
                const timingText = isEarly ? 'æå‰' : 'å»¶è¿Ÿ';
                
                this.resultDetails.innerHTML = `
                    <p><strong>ç›®æ ‡æ—¶é—´ï¼š</strong>${targetTime}ç§’</p>
                    <p><strong>å®é™…æ—¶é—´ï¼š</strong>${actualTime.toFixed(2)}ç§’</p>
                    <p><strong>æ—¶é—´å·®ï¼š</strong>${timingText} ${difference.toFixed(2)}ç§’</p>
                    <p><strong>å»ºè®®ï¼š</strong>${this.getAdvice(accuracy, isEarly)}</p>
                `;
                
                this.resultArea.classList.remove('hidden');
            }

            getAdvice(accuracy, isEarly) {
                if (accuracy >= 90) {
                    return 'æ—¶é—´æ„ŸçŸ¥éå¸¸å‡†ç¡®ï¼ç»§ç»­ä¿æŒè¿™ç§ä¸“æ³¨åº¦ã€‚';
                } else if (accuracy >= 75) {
                    return 'æ—¶é—´æ„ŸçŸ¥è‰¯å¥½ï¼Œå¯ä»¥å°è¯•æ›´é•¿çš„æ—¶é—´æ®µæ¥æŒ‘æˆ˜è‡ªå·±ã€‚';
                } else if (accuracy >= 60) {
                    const timing = isEarly ? 'å°è¯•æ›´è€å¿ƒåœ°ç­‰å¾…' : 'å¯ä»¥æ›´å¿«åšå‡ºåˆ¤æ–­';
                    return `æ—¶é—´æ„ŸçŸ¥æœ‰å¾…æé«˜ï¼Œ${timing}ã€‚å¤šç»ƒä¹ ä¼šæœ‰å¸®åŠ©ã€‚`;
                } else {
                    const timing = isEarly ? 'è¿‡äºæ€¥èº' : 'ååº”è¿‡æ…¢';
                    return `æ—¶é—´æ„ŸçŸ¥éœ€è¦å¤§å¹…æ”¹è¿›ï¼Œæ‚¨å¯èƒ½${timing}ã€‚å»ºè®®ä»è¾ƒçŸ­çš„æ—¶é—´æ®µå¼€å§‹ç»ƒä¹ ã€‚`;
                }
            }

            updateStats() {
                const totalTests = this.testHistory.length;
                document.getElementById('total-tests').textContent = totalTests;
                
                if (totalTests === 0) {
                    document.getElementById('avg-accuracy').textContent = '0%';
                    document.getElementById('best-accuracy').textContent = '0%';
                    document.getElementById('improvement-streak').textContent = '0';
                    return;
                }
                
                // å¹³å‡å‡†ç¡®ç‡
                const avgAccuracy = this.testHistory.reduce((sum, test) => sum + test.accuracy, 0) / totalTests;
                document.getElementById('avg-accuracy').textContent = `${avgAccuracy.toFixed(1)}%`;
                
                // æœ€ä½³å‡†ç¡®ç‡
                const bestAccuracy = Math.max(...this.testHistory.map(test => test.accuracy));
                document.getElementById('best-accuracy').textContent = `${bestAccuracy.toFixed(1)}%`;
                
                // è¿ç»­æ”¹è¿›è®¡ç®—
                let streak = 0;
                for (let i = 1; i < Math.min(totalTests, 10); i++) {
                    if (this.testHistory[i-1].accuracy > this.testHistory[i].accuracy) {
                        streak++;
                    } else {
                        break;
                    }
                }
                document.getElementById('improvement-streak').textContent = streak;
            }

            updateHistory() {
                const historyList = document.getElementById('history-list');
                historyList.innerHTML = '';
                
                this.testHistory.slice(0, 10).forEach((test, index) => {
                    const date = new Date(test.timestamp);
                    const timeStr = date.toLocaleTimeString('zh-CN', { 
                        hour: '2-digit', 
                        minute: '2-digit' 
                    });
                    
                    const historyItem = document.createElement('div');
                    historyItem.className = 'history-item';
                    
                    const isEarly = test.actualTime < test.targetTime;
                    const timingIcon = isEarly ? 'âš¡' : 'ğŸŒ';
                    
                    historyItem.innerHTML = `
                        <div>
                            <strong>${test.targetTime}ç§’æµ‹è¯•</strong> ${timingIcon}
                            <small style="color: #666;">${timeStr}</small>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-weight: bold; color: ${test.accuracy >= 75 ? '#28a745' : test.accuracy >= 60 ? '#ffc107' : '#dc3545'};">
                                ${test.accuracy.toFixed(1)}%
                            </div>
                            <small style="color: #666;">
                                ${test.actualTime.toFixed(2)}s
                            </small>
                        </div>
                    `;
                    
                    historyList.appendChild(historyItem);
                });
                
                if (this.testHistory.length === 0) {
                    historyList.innerHTML = '<p style="text-align: center; color: #666; padding: 20px;">æš‚æ— æµ‹è¯•è®°å½•</p>';
                }
            }

            clearHistory() {
                if (this.testHistory.length === 0) {
                    alert('æš‚æ— å†å²è®°å½•å¯æ¸…é™¤');
                    return;
                }

                if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰æµ‹è¯•å†å²è®°å½•å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ã€‚')) {
                    this.testHistory = [];
                    localStorage.removeItem('timePerceptionHistory');
                    this.updateStats();
                    this.updateHistory();
                    alert('å†å²è®°å½•å·²æ¸…é™¤');
                }
            }
        }

        // åˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', () => {
            new TimePerceptionTester();
        });

        // è”ç³»æˆ‘ä»¬åŠŸèƒ½
        function openContactModal() {
            document.getElementById('contactModal').style.display = 'block';
        }

        function closeContactModal() {
            document.getElementById('contactModal').style.display = 'none';
        }

        // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
        window.onclick = function(event) {
            const modal = document.getElementById('contactModal');
            if (event.target === modal) {
                closeContactModal();
            }
        }

        // ESCé”®å…³é—­æ¨¡æ€æ¡†
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeContactModal();
            }
        });
    </script>

    <!-- è”ç³»æˆ‘ä»¬æ¨¡æ€æ¡† -->
    <div id="contactModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeContactModal()">&times;</span>
            <h2>ğŸ“ è”ç³»æˆ‘ä»¬</h2>
            <div class="contact-info">
                <div class="contact-item">
                    <i>ğŸ“§</i>
                    <strong>QQé‚®ç®±:</strong>
                    <span>1990909398@qq.com</span>
                </div>
                <div class="contact-item">
                    <i>ğŸ’¬</i>
                    <strong>å¾®ä¿¡å·:</strong>
                    <span>y8849112640</span>
                </div>
            </div>
            <div class="contact-message">
                å‘æˆ‘ä»¬å‘é€æ¶ˆæ¯<br>
                å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä¸‹é¢çš„é‚®ç®±æˆ–å¾®ä¿¡è”ç³»æˆ‘ä»¬
            </div>
        </div>
    </div>
</body>
</html>

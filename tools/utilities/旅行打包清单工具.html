<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—…è¡Œæ‰“åŒ…å·¥å…·æ¸…å•</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="20" cy="20" r="1" fill="%23ffffff" opacity="0.1"/><circle cx="80" cy="40" r="1" fill="%23ffffff" opacity="0.1"/><circle cx="40" cy="80" r="1" fill="%23ffffff" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>') repeat;
            pointer-events: none;
            z-index: -1;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15), 0 0 0 1px rgba(255,255,255,0.1);
            overflow: hidden;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .header {
            background: linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 50%, #45b7d1 100%);
            color: white;
            padding: 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 20px 20px;
            animation: float 20s infinite linear;
        }

        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(-20px, -20px) rotate(360deg); }
        }

        .header h1 {
            font-size: 2.8em;
            margin-bottom: 15px;
            font-weight: 300;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.95;
            text-shadow: 0 1px 5px rgba(0,0,0,0.1);
            position: relative;
            z-index: 1;
        }

        .form-section {
            padding: 50px;
            background: linear-gradient(145deg, #f8f9ff 0%, #fff5f8 100%);
        }

        .input-group {
            margin-bottom: 30px;
            position: relative;
        }

        .input-group label {
            display: block;
            margin-bottom: 12px;
            font-weight: 600;
            color: #2c3e50;
            font-size: 1.1em;
            position: relative;
        }

        .input-group label::before {
            content: 'âœ¨';
            margin-right: 8px;
            font-size: 0.9em;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 18px;
            border: 2px solid #e1e5e9;
            border-radius: 15px;
            font-size: 1em;
            transition: all 0.3s ease;
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #ff6b6b;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.2), inset 0 2px 4px rgba(0,0,0,0.05);
            transform: translateY(-2px);
        }

        .generate-btn {
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 50%, #45b7d1 100%);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 1.3em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
            position: relative;
            overflow: hidden;
        }

        .generate-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .generate-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(255, 107, 107, 0.4);
        }

        .generate-btn:hover::before {
            left: 100%;
        }

        .generate-btn:active {
            transform: translateY(-1px);
        }

        .result-section {
            padding: 0 50px 50px;
            display: none;
            background: linear-gradient(145deg, #f0f8ff 0%, #fff0f5 100%);
        }

        .result-section.show {
            display: block;
        }

        .checklist {
            background: linear-gradient(145deg, #ffffff 0%, #f8f9fa 100%);
            border-radius: 20px;
            padding: 35px;
            margin-top: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1), inset 0 1px 0 rgba(255,255,255,0.8);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .checklist h2 {
            color: #2c3e50;
            margin-bottom: 25px;
            font-size: 2em;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: relative;
        }

        .checklist h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4);
            border-radius: 2px;
        }

        .category {
            margin-bottom: 30px;
            background: rgba(255,255,255,0.7);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .category h3 {
            color: #2c3e50;
            margin-bottom: 18px;
            font-size: 1.4em;
            padding-bottom: 8px;
            position: relative;
            font-weight: 600;
        }

        .category h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 3px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4);
            border-radius: 2px;
        }

        .item-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
        }

        .item {
            display: flex;
            align-items: center;
            padding: 10px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .item input[type="checkbox"] {
            margin-right: 10px;
            transform: scale(1.2);
        }

        .item label {
            cursor: pointer;
            flex: 1;
        }

        .item.checked {
            opacity: 0.6;
            text-decoration: line-through;
        }

        .item.essential {
            border-left: 5px solid #e74c3c;
            background: linear-gradient(135deg, #fff5f5 0%, #ffeaa7 100%);
            box-shadow: 0 3px 10px rgba(231, 76, 60, 0.2);
        }

        .item.recommended {
            border-left: 5px solid #27ae60;
            background: linear-gradient(135deg, #f8fff9 0%, #a8e6cf 100%);
            box-shadow: 0 3px 10px rgba(39, 174, 96, 0.2);
        }

        .item.optional {
            border-left: 5px solid #f39c12;
            background: linear-gradient(135deg, #fffdf5 0%, #ffd93d 100%);
            box-shadow: 0 3px 10px rgba(243, 156, 18, 0.2);
        }

        .recommended-section {
            background: linear-gradient(145deg, #e8f4fd 0%, #fff0f5 100%);
            border-radius: 20px;
            padding: 30px;
            margin-top: 25px;
            border: 3px dashed #74b9ff;
            position: relative;
            overflow: hidden;
        }

        .recommended-section::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #74b9ff, #0984e3, #74b9ff);
            border-radius: 20px;
            z-index: -1;
            animation: borderGlow 3s ease-in-out infinite alternate;
        }

        @keyframes borderGlow {
            0% { opacity: 0.5; }
            100% { opacity: 0.8; }
        }

        .recommended-section h3 {
            color: #0984e3;
            margin-bottom: 20px;
            text-align: center;
            font-size: 1.5em;
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .add-item-btn {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            margin-left: 12px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 184, 148, 0.3);
            font-weight: 600;
        }

        .add-item-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 184, 148, 0.4);
            background: linear-gradient(135deg, #00a085 0%, #00b7b3 100%);
        }

        .priority-badge {
            font-size: 0.8em;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 8px;
            font-weight: bold;
        }

        .priority-essential {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(231, 76, 60, 0.3);
        }

        .priority-recommended {
            background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(39, 174, 96, 0.3);
        }

        .priority-optional {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
            color: white;
            box-shadow: 0 2px 8px rgba(243, 156, 18, 0.3);
        }

        .summary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            color: white;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 25px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
        }

        .summary::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .print-btn {
            background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            margin-top: 25px;
            float: right;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(108, 92, 231, 0.3);
            font-weight: 600;
        }

        .print-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(108, 92, 231, 0.4);
            background: linear-gradient(135deg, #5f4fcf 0%, #9085e8 100%);
        }

        .clear-btn {
            background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            margin-top: 25px;
            margin-right: 15px;
            float: right;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(253, 121, 168, 0.3);
            font-weight: 600;
        }

        .clear-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(253, 121, 168, 0.4);
            background: linear-gradient(135deg, #e66b96 0%, #d63384 100%);
        }

        .button-group {
            overflow: hidden;
        }

        @media (max-width: 768px) {
            .container {
                margin: 15px;
                border-radius: 20px;
            }
            
            .header {
                padding: 30px 20px;
            }
            
            .header h1 {
                font-size: 2.2em;
            }
            
            .form-section, .checklist {
                padding: 30px 25px;
            }
            
            .item-list {
                grid-template-columns: 1fr;
            }
            
            .generate-btn {
                padding: 18px;
                font-size: 1.2em;
            }
            
            .print-btn, .clear-btn {
                padding: 12px 20px;
                margin-top: 20px;
            }
        }

        @media print {
            body {
                background: white;
            }
            
            .container {
                box-shadow: none;
                background: white;
            }
            
            .form-section, .print-btn, .clear-btn, .recommended-section {
                display: none;
            }
            
            .header {
                background: #333;
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§³ æ—…è¡Œæ‰“åŒ…å·¥å…·æ¸…å•</h1>
            <p>æ™ºèƒ½ç”Ÿæˆä¸ªæ€§åŒ–æ—…è¡Œå¿…å¤‡ç‰©å“æ¸…å•</p>
        </div>

        <div class="form-section">
            <div class="input-group">
                <label for="destination">ç›®çš„åœ°</label>
                <input type="text" id="destination" placeholder="ä¾‹å¦‚ï¼šæ—¥æœ¬ä¸œäº¬ã€æ³°å›½æ™®å‰å²›ã€åŒ—äº¬ç­‰">
            </div>

            <div class="input-group">
                <label for="days">æ—…è¡Œå¤©æ•°</label>
                <input type="number" id="days" min="1" max="365" placeholder="è¾“å…¥æ—…è¡Œå¤©æ•°">
            </div>

            <div class="input-group">
                <label for="season">å‡ºè¡Œå­£èŠ‚</label>
                <select id="season">
                    <option value="">è¯·é€‰æ‹©å­£èŠ‚</option>
                    <option value="spring">æ˜¥å­£ (3-5æœˆ)</option>
                    <option value="summer">å¤å­£ (6-8æœˆ)</option>
                    <option value="autumn">ç§‹å­£ (9-11æœˆ)</option>
                    <option value="winter">å†¬å­£ (12-2æœˆ)</option>
                </select>
            </div>

            <div class="input-group">
                <label for="travelType">æ—…è¡Œç±»å‹</label>
                <select id="travelType">
                    <option value="">è¯·é€‰æ‹©æ—…è¡Œç±»å‹</option>
                    <option value="business">å•†åŠ¡å‡ºè¡Œ</option>
                    <option value="leisure">ä¼‘é—²åº¦å‡</option>
                    <option value="adventure">æˆ·å¤–æ¢é™©</option>
                    <option value="cultural">æ–‡åŒ–æ—…æ¸¸</option>
                    <option value="beach">æµ·æ»¨åº¦å‡</option>
                    <option value="city">åŸå¸‚è§‚å…‰</option>
                </select>
            </div>

            <button class="generate-btn" onclick="generatePackingList()">
                ğŸ¯ ç”Ÿæˆæ‰“åŒ…æ¸…å•
            </button>
        </div>

        <div class="result-section" id="resultSection">
            <div class="summary" id="summary"></div>
            <div class="checklist" id="checklist"></div>
            <div class="button-group">
                <button class="print-btn" onclick="window.print()">ğŸ–¨ï¸ æ‰“å°æ¸…å•</button>
                <button class="clear-btn" onclick="clearAll()">ğŸ—‘ï¸ é‡æ–°å¼€å§‹</button>
            </div>
        </div>
    </div>

    <script>
        // åŸºç¡€ç‰©å“æ•°æ®åº“ - é‡æ–°ç»„ç»‡ä¸ºå¿…éœ€å“ã€æ¨èå“å’Œå¯é€‰å“
        const itemDatabase = {
            essential: {
                name: "å¿…éœ€å“",
                items: [
                    "æŠ¤ç…§/èº«ä»½è¯", "ç­¾è¯æ–‡ä»¶", "æœºç¥¨/è½¦ç¥¨", "é…’åº—é¢„è®¢å•", 
                    "ç°é‡‘", "é“¶è¡Œå¡", "æ‰‹æœº", "å……ç”µå™¨"
                ]
            },
            recommended: {
                name: "æ¨èç‰©å“",
                items: [
                    "å……ç”µå®", "è€³æœº", "ç›¸æœº", "å¤ªé˜³é•œ", "é›¨ä¼", "å¸¸ç”¨è¯å“", 
                    "æ¹¿çº¸å·¾", "å£ç½©", "ä¿æ¸©æ¯", "å°èƒŒåŒ…"
                ]
            },
            optional: {
                name: "å¯é€‰ç‰©å“",
                items: [
                    "å¹³æ¿ç”µè„‘", "ç”µå­ä¹¦", "æ¸¸æˆæœº", "é›¶é£Ÿ", "èŒ¶å¶", 
                    "æ‹–é‹", "çœ¼ç½©", "é¢ˆæ•", "ä¾¿æºéŸ³å“", "è‡ªæ‹æ†"
                ]
            },
            clothing: {
                name: "æœè£…ç±»",
                essential: {
                    spring: ["å†…è¡£è£¤", "è¢œå­", "èˆ’é€‚çš„é‹å­", "åŸºç¡€å¤–å¥—"],
                    summer: ["çŸ­è¢–Tæ¤", "çŸ­è£¤", "å†…è¡£è£¤", "è¢œå­", "å‡‰é‹"],
                    autumn: ["é•¿è¢–è¡¬è¡«", "é•¿è£¤", "å†…è¡£è£¤", "è¢œå­", "å¤–å¥—"],
                    winter: ["ä¿æš–å†…è¡£", "åšè£¤å­", "ç¾½ç»’æœ", "ä¿æš–é‹", "åšè¢œå­"]
                },
                recommended: {
                    spring: ["è½»è–„å¤–å¥—", "é•¿è¢–è¡¬è¡«", "Tæ¤", "ç‰›ä»”è£¤", "ä¼‘é—²è£¤"],
                    summer: ["è£™å­", "å¸½å­", "é˜²æ™’è¡£", "æ³³è¡£"],
                    autumn: ["æ¯›è¡£", "å›´å·¾"],
                    winter: ["æ‰‹å¥—", "å›´å·¾", "å¸½å­"]
                },
                optional: {
                    spring: ["é›¨å…·", "è¿åŠ¨é‹", "ä¼‘é—²è£…"],
                    summer: ["æ²™æ»©è£…", "è¿åŠ¨è£…", "å‡‰å¸½"],
                    autumn: ["é£è¡£", "é´å­", "é’ˆç»‡è¡«"],
                    winter: ["é›ªåœ°é´", "ä¿æš–å¸½", "åšæ‰‹å¥—"]
                }
            },
            toiletries: {
                name: "æ´—æŠ¤ç”¨å“",
                essential: ["ç‰™åˆ·", "ç‰™è†", "æ¯›å·¾", "æŠ¤è‚¤å“"],
                recommended: ["æ´—å‘æ°´", "æ²æµ´éœ²", "é˜²æ™’éœœ", "åŒ–å¦†å“", "å‰ƒé¡»åˆ€"],
                optional: ["å«ç”Ÿçº¸", "æ´—è¡£æ¶²", "æŠ¤å‘ç´ ", "é¢è†œ", "é¦™æ°´"]
            },
            electronics: {
                name: "ç”µå­è®¾å¤‡",
                essential: ["æ•°æ®çº¿", "è½¬æ¢æ’å¤´"],
                recommended: ["ç›¸æœº", "è€³æœº"],
                optional: ["ç§»åŠ¨ç¡¬ç›˜", "å¹³æ¿ç”µè„‘", "ç”µå­ä¹¦é˜…è¯»å™¨", "è“ç‰™éŸ³å“"]
            },
            medicine: {
                name: "è¯å“å¥åº·",
                essential: ["å¸¸ç”¨è¯å“", "åˆ›å¯è´´", "å£ç½©"],
                recommended: ["ä½“æ¸©è®¡", "æ¶ˆæ¯’æ¹¿å·¾", "æ™•è½¦è¯", "è‚ èƒƒè¯"],
                optional: ["ç»´ç”Ÿç´ ", "æ­¢ç—›è¯", "æ„Ÿå†’è¯", "è¿‡æ•è¯"]
            },
            business: {
                name: "å•†åŠ¡ç”¨å“",
                items: ["ç¬”è®°æœ¬ç”µè„‘", "å•†åŠ¡è£…", "é¢†å¸¦", "çš®é‹", "å…¬æ–‡åŒ…", "åç‰‡", "æ–‡ä»¶å¤¹", "ç¬”"]
            },
            leisure: {
                name: "ä¼‘é—²ç”¨å“",
                items: ["ä¼‘é—²æœ", "è¿åŠ¨é‹", "èƒŒåŒ…", "æ°´æ¯", "é›¶é£Ÿ", "ä¹¦ç±", "æ¸¸æˆè®¾å¤‡"]
            },
            adventure: {
                name: "æˆ·å¤–ç”¨å“",
                items: ["ç™»å±±é‹", "å†²é”‹è¡£", "ç™»å±±åŒ…", "å¤´ç¯", "æŒ‡å—é’ˆ", "æ€¥æ•‘åŒ…", "é˜²è™«å–·é›¾", "æˆ·å¤–å¸½"]
            },
            beach: {
                name: "æµ·æ»¨ç”¨å“",
                items: ["æ³³è¡£", "æ²™æ»©å·¾", "é˜²æ™’éœœ", "å¤ªé˜³é•œ", "å‡‰é‹", "é˜²æ°´åŒ…", "æµ®æ½œè£…å¤‡"]
            }
        };

        // åœ°åŒºç‰¹æ®Šç‰©å“
        const regionSpecialItems = {
            "æ—¥æœ¬": ["æ—¥å…ƒç°é‡‘", "JR Pass", "ä¾¿æºWiFi", "è¯å“ç”³æŠ¥å•"],
            "æ³°å›½": ["é˜²èšŠæ¶²", "è‚ èƒƒè¯", "è½»ä¾¿é›¨è¡£", "æ³°é“¢"],
            "æ¬§æ´²": ["æ¬§æ ‡è½¬æ¢æ’å¤´", "æ¬§å…ƒ", "ä¿é™©å•", "ç”³æ ¹ç­¾è¯"],
            "ç¾å›½": ["ç¾æ ‡è½¬æ¢æ’å¤´", "ç¾å…ƒ", "EVUSç™»è®°", "å°è´¹é›¶é’±"],
            "éŸ©å›½": ["éŸ©å…ƒ", "T-moneyå¡", "éŸ©å¼æŠ¤è‚¤å“", "ä¾¿æºæš–å®å®"],
            "æ–°åŠ å¡": ["æ–°å¸", "è–„å¤–å¥—", "é˜²æ™’ç”¨å“", "èˆ’é€‚æ­¥è¡Œé‹"],
            "é©¬æ¥è¥¿äºš": ["é©¬å¸", "é˜²èšŠæ¶²", "è½»ä¾¿é›¨å…·", "é˜²æ™’éœœ"],
            "å°åº¦": ["å°åº¦å¢æ¯”", "è‚ èƒƒè¯", "é•¿è¢–è¡£ç‰©", "å¤´å·¾"],
            "æ¾³å¤§åˆ©äºš": ["æ¾³å¸", "é˜²æ™’éœœ", "å¸½å­", "å…¥å¢ƒç”³æŠ¥å•"],
            "åŒ—äº¬": ["åšå¤–å¥—", "å£ç½©", "ä¿æ¹¿ç”¨å“", "èˆ’é€‚æ­¥è¡Œé‹"],
            "ä¸Šæµ·": ["è½»ä¾¿å¤–å¥—", "é›¨å…·", "èˆ’é€‚é‹å­", "åœ°é“å¡"],
            "å¹¿å·": ["è½»è–„è¡£ç‰©", "é›¨å…·", "é˜²æ™’ç”¨å“", "èˆ’é€‚é‹å­"],
            "è¥¿è—": ["é«˜åŸååº”è¯", "ä¿æš–è¡£ç‰©", "å¤ªé˜³é•œ", "æ¶¦å”‡è†"],
            "æ–°ç–†": ["é˜²æ™’éœœ", "ä¿æ¹¿ç”¨å“", "åšå¤–å¥—", "èˆ’é€‚é‹å­"],
            "æµ·å—": ["æ³³è¡£", "é˜²æ™’éœœ", "å‡‰é‹", "è½»è–„è¡£ç‰©"]
        };

        function generatePackingList() {
            const destination = document.getElementById('destination').value.trim();
            const days = parseInt(document.getElementById('days').value);
            const season = document.getElementById('season').value;
            const travelType = document.getElementById('travelType').value;

            if (!destination || !days || !season || !travelType) {
                alert('è¯·å¡«å†™å®Œæ•´çš„æ—…è¡Œä¿¡æ¯ï¼');
                return;
            }

            // ç”Ÿæˆæ¸…å•
            const packingList = generateItems(destination, days, season, travelType);
            
            // æ˜¾ç¤ºç»“æœ
            displayResults(destination, days, season, travelType, packingList);
        }

        function generateItems(destination, days, season, travelType) {
            const essentialItems = {};
            const recommendedItems = {};
            const optionalItems = {};

            // æ·»åŠ åŸºç¡€å¿…éœ€å“
            essentialItems[itemDatabase.essential.name] = [...itemDatabase.essential.items];
            recommendedItems[itemDatabase.recommended.name] = [...itemDatabase.recommended.items];
            optionalItems[itemDatabase.optional.name] = [...itemDatabase.optional.items];

            // æ·»åŠ å­£èŠ‚æ€§æœè£…
            const seasonClothingEssential = itemDatabase.clothing.essential[season] || itemDatabase.clothing.essential.spring;
            const seasonClothingRecommended = itemDatabase.clothing.recommended[season] || itemDatabase.clothing.recommended.spring;
            const seasonClothingOptional = itemDatabase.clothing.optional[season] || itemDatabase.clothing.optional.spring;
            
            essentialItems[itemDatabase.clothing.name] = [...seasonClothingEssential];
            recommendedItems[itemDatabase.clothing.name] = [...seasonClothingRecommended];
            optionalItems[itemDatabase.clothing.name] = [...seasonClothingOptional];

            // æ ¹æ®å¤©æ•°è°ƒæ•´
            if (days > 7) {
                essentialItems[itemDatabase.clothing.name].push("é¢å¤–å†…è¡£è£¤", "é¢å¤–è¢œå­");
                recommendedItems[itemDatabase.clothing.name].push("æ´—è¡£æ¶²");
            }

            // æ·»åŠ æ´—æŠ¤ç”¨å“
            essentialItems[itemDatabase.toiletries.name] = [...itemDatabase.toiletries.essential];
            recommendedItems[itemDatabase.toiletries.name] = [...itemDatabase.toiletries.recommended];
            optionalItems[itemDatabase.toiletries.name] = [...itemDatabase.toiletries.optional];

            // æ·»åŠ ç”µå­è®¾å¤‡
            essentialItems[itemDatabase.electronics.name] = [...itemDatabase.electronics.essential];
            recommendedItems[itemDatabase.electronics.name] = [...itemDatabase.electronics.recommended];
            optionalItems[itemDatabase.electronics.name] = [...itemDatabase.electronics.optional];

            // æ·»åŠ è¯å“å¥åº·
            essentialItems[itemDatabase.medicine.name] = [...itemDatabase.medicine.essential];
            recommendedItems[itemDatabase.medicine.name] = [...itemDatabase.medicine.recommended];
            optionalItems[itemDatabase.medicine.name] = [...itemDatabase.medicine.optional];

            // æ ¹æ®æ—…è¡Œç±»å‹æ·»åŠ ç‰¹æ®Šç‰©å“
            if (travelType === 'business' && itemDatabase.business) {
                recommendedItems[itemDatabase.business.name] = [...itemDatabase.business.items];
            } else if (travelType === 'adventure' && itemDatabase.adventure) {
                recommendedItems[itemDatabase.adventure.name] = [...itemDatabase.adventure.items];
            } else if (travelType === 'beach' && itemDatabase.beach) {
                recommendedItems[itemDatabase.beach.name] = [...itemDatabase.beach.items];
            } else if (travelType === 'leisure' && itemDatabase.leisure) {
                recommendedItems[itemDatabase.leisure.name] = [...itemDatabase.leisure.items];
            }

            // æ·»åŠ åœ°åŒºç‰¹æ®Šç‰©å“
            for (const region in regionSpecialItems) {
                if (destination.includes(region)) {
                    if (!recommendedItems["åœ°åŒºç‰¹è‰²ç‰©å“"]) {
                        recommendedItems["åœ°åŒºç‰¹è‰²ç‰©å“"] = [];
                    }
                    recommendedItems["åœ°åŒºç‰¹è‰²ç‰©å“"] = [...recommendedItems["åœ°åŒºç‰¹è‰²ç‰©å“"], ...regionSpecialItems[region]];
                    break;
                }
            }

            // æ ¹æ®å­£èŠ‚æ·»åŠ ç‰¹æ®Šç‰©å“
            if (season === 'summer') {
                if (!recommendedItems["å¤å­£ä¸“ç”¨"]) recommendedItems["å¤å­£ä¸“ç”¨"] = [];
                recommendedItems["å¤å­£ä¸“ç”¨"].push("é˜²æ™’éœœ", "å¤ªé˜³å¸½");
                if (!optionalItems["å¤å­£ä¸“ç”¨"]) optionalItems["å¤å­£ä¸“ç”¨"] = [];
                optionalItems["å¤å­£ä¸“ç”¨"].push("å‡‰å¸­", "ç”µæ‰‡");
            } else if (season === 'winter') {
                if (!recommendedItems["å†¬å­£ä¸“ç”¨"]) recommendedItems["å†¬å­£ä¸“ç”¨"] = [];
                recommendedItems["å†¬å­£ä¸“ç”¨"].push("æš–å®å®", "ä¿æ¸©æ¯");
                if (!optionalItems["å†¬å­£ä¸“ç”¨"]) optionalItems["å†¬å­£ä¸“ç”¨"] = [];
                optionalItems["å†¬å­£ä¸“ç”¨"].push("æ¶¦å”‡è†", "æŠ¤æ‰‹éœœ");
            }

            return { essential: essentialItems, recommended: recommendedItems, optional: optionalItems };
        }

        let selectedRecommendedItems = new Set();
        let selectedOptionalItems = new Set();

        function displayResults(destination, days, season, travelType) {
            const packingData = generateItems(destination, days, season, travelType);
            
            // æ˜¾ç¤ºæ‘˜è¦
            const summary = document.getElementById('summary');
            const seasonNames = {
                spring: 'æ˜¥å­£', summer: 'å¤å­£', autumn: 'ç§‹å­£', winter: 'å†¬å­£'
            };
            const travelTypeNames = {
                business: 'å•†åŠ¡å‡ºè¡Œ', leisure: 'ä¼‘é—²åº¦å‡', adventure: 'æˆ·å¤–æ¢é™©',
                cultural: 'æ–‡åŒ–æ—…æ¸¸', beach: 'æµ·æ»¨åº¦å‡', city: 'åŸå¸‚è§‚å…‰'
            };

            let totalEssential = 0, totalRecommended = 0, totalOptional = 0;
            Object.values(packingData.essential).forEach(items => totalEssential += items.length);
            Object.values(packingData.recommended).forEach(items => totalRecommended += items.length);
            Object.values(packingData.optional).forEach(items => totalOptional += items.length);

            summary.innerHTML = `
                <h2>ğŸ“‹ ${destination} ${days}å¤©${seasonNames[season]}${travelTypeNames[document.getElementById('travelType').value]}æ¸…å•</h2>
                <p>å¿…éœ€å“: ${totalEssential} é¡¹ | æ¨èå“: ${totalRecommended} é¡¹ | å¯é€‰å“: ${totalOptional} é¡¹</p>
            `;

            // æ˜¾ç¤ºæ¸…å•
            const checklist = document.getElementById('checklist');
            let checklistHTML = '<h2>ğŸ’ æˆ‘çš„æ‰“åŒ…æ¸…å•</h2>';

            // å¿…éœ€å“æ¸…å•
            checklistHTML += '<div class="category"><h3>ğŸ”´ å¿…éœ€å“ (å¿…é¡»æºå¸¦)</h3><div class="item-list">';
            for (const [category, items] of Object.entries(packingData.essential)) {
                items.forEach((item, index) => {
                    const itemId = `essential-${category}-${index}`;
                    checklistHTML += `
                        <div class="item essential" id="item-${itemId}">
                            <input type="checkbox" id="check-${itemId}" onchange="toggleItem('${itemId}')">
                            <label for="check-${itemId}">${item}</label>
                            <span class="priority-badge priority-essential">å¿…éœ€</span>
                        </div>
                    `;
                });
            }
            checklistHTML += '</div></div>';

            // å·²é€‰æ¨èå“æ¸…å•
            if (selectedRecommendedItems.size > 0) {
                checklistHTML += '<div class="category"><h3>ğŸŸ¢ å·²é€‰æ¨èå“</h3><div class="item-list">';
                selectedRecommendedItems.forEach((item, index) => {
                    const itemId = `selected-recommended-${index}`;
                    checklistHTML += `
                        <div class="item recommended" id="item-${itemId}">
                            <input type="checkbox" id="check-${itemId}" onchange="toggleItem('${itemId}')">
                            <label for="check-${itemId}">${item}</label>
                            <span class="priority-badge priority-recommended">æ¨è</span>
                        </div>
                    `;
                });
                checklistHTML += '</div></div>';
            }

            // å·²é€‰å¯é€‰å“æ¸…å•
            if (selectedOptionalItems.size > 0) {
                checklistHTML += '<div class="category"><h3>ğŸŸ¡ å·²é€‰å¯é€‰å“</h3><div class="item-list">';
                selectedOptionalItems.forEach((item, index) => {
                    const itemId = `selected-optional-${index}`;
                    checklistHTML += `
                        <div class="item optional" id="item-${itemId}">
                            <input type="checkbox" id="check-${itemId}" onchange="toggleItem('${itemId}')">
                            <label for="check-${itemId}">${item}</label>
                            <span class="priority-badge priority-optional">å¯é€‰</span>
                        </div>
                    `;
                });
                checklistHTML += '</div></div>';
            }

            checklist.innerHTML = checklistHTML;

            // æ˜¾ç¤ºæ¨èç‰©å“é€‰æ‹©åŒºåŸŸ
            displayRecommendedItems(packingData.recommended, packingData.optional);

            // æ˜¾ç¤ºç»“æœåŒºåŸŸ
            document.getElementById('resultSection').classList.add('show');
            document.getElementById('resultSection').scrollIntoView({ behavior: 'smooth' });
        }

        function displayRecommendedItems(recommendedData, optionalData) {
            let recommendedHTML = `
                <div class="recommended-section">
                    <h3>ğŸ›ï¸ æ¨èç‰©å“é€‰æ‹© (ç‚¹å‡»æ·»åŠ åˆ°æ¸…å•)</h3>
                    <div class="category">
                        <h4>ğŸŸ¢ æ¨èç‰©å“</h4>
                        <div class="item-list">
            `;

            for (const [category, items] of Object.entries(recommendedData)) {
                items.forEach((item, index) => {
                    if (!selectedRecommendedItems.has(item)) {
                        recommendedHTML += `
                            <div class="item recommended">
                                <label>${item}</label>
                                <button class="add-item-btn" onclick="addRecommendedItem('${item}')">
                                    â• æ·»åŠ 
                                </button>
                            </div>
                        `;
                    }
                });
            }

            recommendedHTML += `
                        </div>
                    </div>
                    <div class="category">
                        <h4>ğŸŸ¡ å¯é€‰ç‰©å“</h4>
                        <div class="item-list">
            `;

            for (const [category, items] of Object.entries(optionalData)) {
                items.forEach((item, index) => {
                    if (!selectedOptionalItems.has(item)) {
                        recommendedHTML += `
                            <div class="item optional">
                                <label>${item}</label>
                                <button class="add-item-btn" onclick="addOptionalItem('${item}')">
                                    â• æ·»åŠ 
                                </button>
                            </div>
                        `;
                    }
                });
            }

            recommendedHTML += `
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('checklist').innerHTML += recommendedHTML;
        }

        function addRecommendedItem(item) {
            selectedRecommendedItems.add(item);
            refreshResults();
        }

        function addOptionalItem(item) {
            selectedOptionalItems.add(item);
            refreshResults();
        }

        function refreshResults() {
            const destination = document.getElementById('destination').value;
            const days = parseInt(document.getElementById('days').value);
            const season = document.getElementById('season').value;
            const travelType = document.getElementById('travelType').value;
            
            displayResults(destination, days, season, travelType);
        }

        function toggleItem(itemId) {
            const item = document.getElementById(`item-${itemId}`);
            const checkbox = document.getElementById(`check-${itemId}`);
            
            if (checkbox.checked) {
                item.classList.add('checked');
            } else {
                item.classList.remove('checked');
            }
        }

        function clearAll() {
            // ç¡®è®¤å¯¹è¯æ¡†
            if (confirm('ç¡®å®šè¦æ¸…é™¤æ‰€æœ‰å†…å®¹å¹¶é‡æ–°å¼€å§‹å—ï¼Ÿ')) {
                // æ¸…ç©ºè¡¨å•
                document.getElementById('destination').value = '';
                document.getElementById('days').value = '';
                document.getElementById('season').value = '';
                document.getElementById('travelType').value = '';
                
                // æ¸…ç©ºé€‰æ‹©çš„ç‰©å“
                selectedRecommendedItems.clear();
                selectedOptionalItems.clear();
                
                // éšè—ç»“æœåŒºåŸŸ
                document.getElementById('resultSection').classList.remove('show');
                
                // æ»šåŠ¨åˆ°é¡¶éƒ¨
                window.scrollTo({ top: 0, behavior: 'smooth' });
                
                // é‡æ–°è®¾ç½®å½“å‰å­£èŠ‚
                setCurrentSeason();
            }
        }

        function setCurrentSeason() {
            // è‡ªåŠ¨æ£€æµ‹å½“å‰å­£èŠ‚
            const now = new Date();
            const month = now.getMonth() + 1;
            let currentSeason = 'spring';
            
            if (month >= 3 && month <= 5) currentSeason = 'spring';
            else if (month >= 6 && month <= 8) currentSeason = 'summer';
            else if (month >= 9 && month <= 11) currentSeason = 'autumn';
            else currentSeason = 'winter';
            
            document.getElementById('season').value = currentSeason;
        }

        // é¡µé¢åŠ è½½æ—¶çš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            setCurrentSeason();
        });
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸‡å¹´å†å€’è®¡æ—¶å·¥å…·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --warning-gradient: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            --danger-gradient: linear-gradient(135deg, #ff0844 0%, #ffb199 100%);
            --dark-gradient: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            background-attachment: fixed;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 30px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
            overflow: hidden;
            animation: slideIn 0.8s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header {
            background: var(--primary-gradient);
            color: white;
            padding: 60px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.1);
            opacity: 0.3;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
            text-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.4em;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .content {
            padding: 40px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .current-info {
            grid-column: 1 / -1;
            background: var(--secondary-gradient);
            color: white;
            padding: 40px;
            border-radius: 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .current-info:hover {
            transform: scale(1.02);
        }

        .current-info h3 {
            margin-bottom: 20px;
            font-size: 2em;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .current-info .date-display {
            font-size: 1.5em;
            margin: 15px 0;
            padding: 10px 20px;
            background: rgba(255,255,255,0.2);
            border-radius: 15px;
            display: inline-block;
            backdrop-filter: blur(10px);
        }

        .section {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            padding: 35px;
            border-radius: 25px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }

        .section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.05);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .section:hover::before {
            opacity: 1;
        }

        .section:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 25px 50px rgba(0,0,0,0.2);
        }

        .section h2 {
            color: white;
            margin-bottom: 25px;
            font-size: 2em;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            position: relative;
        }

        .calendar-section {
            grid-column: 1 / -1;
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            padding: 35px;
            border-radius: 25px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            background: var(--primary-gradient);
            padding: 20px;
            border-radius: 20px;
            color: white;
        }

        .calendar-nav {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .calendar-nav button {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
        }

        .calendar-nav button:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .calendar-nav button:active {
            transform: scale(0.95);
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            background: rgba(0,0,0,0.1);
            padding: 8px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(255,255,255,0.9);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
            padding: 5px;
        }

        .calendar-day::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--primary-gradient);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .calendar-day:hover::before {
            opacity: 0.1;
        }

        .calendar-day:hover {
            transform: scale(1.1) rotate(2deg);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .calendar-day:active {
            transform: scale(0.95);
        }

        .calendar-day.today {
            background: var(--success-gradient);
            color: white;
            box-shadow: 0 8px 20px rgba(79, 172, 254, 0.4);
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-5px); }
            60% { transform: translateY(-3px); }
        }

        .calendar-day.selected {
            background: var(--secondary-gradient);
            color: white;
            box-shadow: 0 8px 20px rgba(240, 147, 251, 0.4);
            transform: scale(1.05);
        }

        .calendar-day.other-month {
            background: rgba(255,255,255,0.5);
            color: rgba(0,0,0,0.4);
        }

        .calendar-day.weekend {
            background: var(--warning-gradient);
            color: white;
        }

        .calendar-day-header {
            background: var(--dark-gradient);
            color: white;
            font-weight: bold;
            cursor: default;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .calendar-day-header:hover {
            background: var(--dark-gradient);
            transform: none;
        }

        .day-number {
            font-size: 18px;
            font-weight: bold;
            z-index: 1;
            position: relative;
            color: #333;
            line-height: 1.2;
        }

        .day-info {
            font-size: 12px;
            opacity: 0.7;
            z-index: 1;
            position: relative;
            color: #666;
            line-height: 1;
            margin-top: 2px;
        }

        .calendar-day.other-month .day-info {
            opacity: 0.5;
            font-size: 11px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: white;
            font-size: 1.1em;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 15px;
            font-size: 16px;
            background: rgba(255,255,255,0.2);
            color: white;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
            transition: all 0.3s ease;
        }

        .form-group input::placeholder {
            color: rgba(255,255,255,0.7);
        }

        .form-group input:focus {
            outline: none;
            background: rgba(255,255,255,0.3);
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn {
            background: var(--primary-gradient);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
        }

        .btn:active {
            transform: translateY(-2px) scale(1.02);
        }

        .countdown-display {
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            padding: 30px;
            border-radius: 20px;
            margin-top: 25px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .countdown-display:hover {
            transform: scale(1.02);
        }

        .countdown-item {
            display: inline-block;
            margin: 10px;
            padding: 20px;
            background: var(--primary-gradient);
            color: white;
            border-radius: 15px;
            min-width: 100px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .countdown-item:hover {
            transform: translateY(-5px) rotate(5deg);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }

        .countdown-item .number {
            font-size: 2.5em;
            font-weight: bold;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .countdown-item .label {
            font-size: 1em;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .solar-term {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            padding: 20px;
            margin: 15px 0;
            border-radius: 15px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .solar-term::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--success-gradient);
            opacity: 0;
            transition: all 0.3s ease;
        }

        .solar-term:hover::before {
            left: 0;
            opacity: 0.1;
        }

        .solar-term:hover {
            transform: translateX(10px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .solar-term .name {
            font-weight: bold;
            color: white;
            font-size: 1.3em;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
        }

        .solar-term .date {
            color: rgba(255,255,255,0.8);
            margin-top: 8px;
            position: relative;
            z-index: 1;
        }

        .solar-term .countdown {
            color: #00f2fe;
            font-weight: bold;
            margin-top: 8px;
            font-size: 1.1em;
            position: relative;
            z-index: 1;
        }

        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 20px;
            }
            
            .header {
                padding: 40px 20px;
            }
            
            .header h1 {
                font-size: 2.5em;
            }

            .calendar-day {
                font-size: 14px;
            }

            .calendar-nav {
                flex-direction: column;
                gap: 10px;
            }
        }

        /* é¢å¤–åŠ¨ç”»æ•ˆæœ */
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .rotate-in {
            animation: rotateIn 0.6s ease-out;
        }

        @keyframes rotateIn {
            from { opacity: 0; transform: rotate(-180deg) scale(0.3); }
            to { opacity: 1; transform: rotate(0) scale(1); }
        }

        .glow {
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { box-shadow: 0 0 10px rgba(102, 126, 234, 0.5); }
            to { box-shadow: 0 0 20px rgba(102, 126, 234, 0.8), 0 0 30px rgba(102, 126, 234, 0.6); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸŒŸ ä¸‡å¹´å†å€’è®¡æ—¶å·¥å…· ğŸŒŸ</h1>
            <p>ç²¾ç¾çš„æ—¶é—´ç®¡ç†ä¸èŠ‚æ°”æé†’å·¥å…·</p>
        </div>
        
        <div class="content">
            <div class="current-info">
                <h3>ğŸ“… å½“å‰æ—¶é—´</h3>
                <div class="date-display" id="currentDate">åŠ è½½ä¸­...</div>
                <div class="date-display" id="currentTime">00:00:00</div>
            </div>

            <div class="section">
                <h2>â° å€’è®¡æ—¶è®¡ç®—å™¨</h2>
                <div class="form-group">
                    <label>é€‰æ‹©ç›®æ ‡æ—¥æœŸï¼š</label>
                    <input type="date" id="targetDate" value="2024-12-31">
                </div>
                <div class="form-group">
                    <label>é€‰æ‹©ç›®æ ‡æ—¶é—´ï¼š</label>
                    <input type="time" id="targetTime" value="23:59:59">
                </div>
                <button class="btn" onclick="calculateCountdown()">ğŸš€ è®¡ç®—å€’è®¡æ—¶</button>
                <div id="countdownDisplay" class="countdown-display" style="display: none;">
                    <h3>è·ç¦»ç›®æ ‡æ—¶é—´è¿˜æœ‰ï¼š</h3>
                    <div id="countdownItems"></div>
                </div>
            </div>

            <div class="section">
                <h2>ğŸŒ¸ 24èŠ‚æ°”å€’è®¡æ—¶</h2>
                <div id="solarTermsList"></div>
            </div>

            <div class="calendar-section">
                <div class="calendar-header">
                    <h2 id="calendarTitle">ğŸ“† 2024å¹´12æœˆ</h2>
                    <div class="calendar-nav">
                        <button onclick="changeMonth(-1)">â—€ ä¸Šä¸ªæœˆ</button>
                        <button onclick="changeMonth(0)">ğŸ“ ä»Šå¤©</button>
                        <button onclick="changeMonth(1)">ä¸‹ä¸ªæœˆ â–¶</button>
                    </div>
                </div>
                <div class="calendar-grid" id="calendarGrid"></div>
                <div id="selectedDateInfo" style="margin-top: 20px; text-align: center; display: none;">
                    <h3 id="selectedDateTitle"></h3>
                    <div id="selectedDateCountdown"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å†œå†è½¬æ¢å‡½æ•°
        function getLunarDate(date) {
            const lunarMonths = ['æ­£æœˆ', 'äºŒæœˆ', 'ä¸‰æœˆ', 'å››æœˆ', 'äº”æœˆ', 'å…­æœˆ', 'ä¸ƒæœˆ', 'å…«æœˆ', 'ä¹æœˆ', 'åæœˆ', 'å†¬æœˆ', 'è…Šæœˆ'];
            const lunarDays = ['åˆä¸€', 'åˆäºŒ', 'åˆä¸‰', 'åˆå››', 'åˆäº”', 'åˆå…­', 'åˆä¸ƒ', 'åˆå…«', 'åˆä¹', 'åˆå',
                              'åä¸€', 'åäºŒ', 'åä¸‰', 'åå››', 'åäº”', 'åå…­', 'åä¸ƒ', 'åå…«', 'åä¹', 'äºŒå',
                              'å»¿ä¸€', 'å»¿äºŒ', 'å»¿ä¸‰', 'å»¿å››', 'å»¿äº”', 'å»¿å…­', 'å»¿ä¸ƒ', 'å»¿å…«', 'å»¿ä¹', 'ä¸‰å'];
            
            // ç®€åŒ–çš„å†œå†è®¡ç®—ï¼ˆåŸºäº2024å¹´æ•°æ®ï¼‰
            const baseDate = new Date(2024, 0, 1); // 2024å¹´1æœˆ1æ—¥å¯¹åº”å†œå†åä¸€æœˆäºŒå
            const diffDays = Math.floor((date - baseDate) / (1000 * 60 * 60 * 24));
            
            // ç®€åŒ–çš„å†œå†æ—¥æœŸæ˜ å°„
            const lunarDayIndex = (diffDays + 19) % 30;
            const lunarMonthIndex = Math.floor(((diffDays + 19) / 30) % 12);
            
            return {
                month: lunarMonths[lunarMonthIndex],
                day: lunarDays[lunarDayIndex]
            };
        }

        // 24èŠ‚æ°”æ•°æ®
        const solarTerms = [
            { name: "ç«‹æ˜¥", date: "2025-02-03", description: "æ˜¥å­£å¼€å§‹" },
            { name: "é›¨æ°´", date: "2025-02-18", description: "é™é›¨å¼€å§‹" },
            { name: "æƒŠè›°", date: "2025-03-05", description: "æ˜¥é›·æƒŠé†’å†¬çœ åŠ¨ç‰©" },
            { name: "æ˜¥åˆ†", date: "2025-03-20", description: "æ˜¼å¤œå¹³åˆ†" },
            { name: "æ¸…æ˜", date: "2025-04-04", description: "å¤©æ°”æ™´æœ—è‰æœ¨ç¹èŒ‚" },
            { name: "è°·é›¨", date: "2025-04-20", description: "é›¨ç”Ÿç™¾è°·" },
            { name: "ç«‹å¤", date: "2025-05-05", description: "å¤å­£å¼€å§‹" },
            { name: "å°æ»¡", date: "2025-05-21", description: "éº¦ç±»ä½œç‰©çŒæµ†" },
            { name: "èŠ’ç§", date: "2025-06-05", description: "éº¦ç±»æˆç†Ÿ" },
            { name: "å¤è‡³", date: "2025-06-21", description: "ç™½æ˜¼æœ€é•¿" },
            { name: "å°æš‘", date: "2025-07-07", description: "åˆä¼å¼€å§‹" },
            { name: "å¤§æš‘", date: "2025-07-22", description: "æœ€çƒ­æ—¶æœŸ" },
            { name: "ç«‹ç§‹", date: "2025-08-07", description: "ç§‹å­£å¼€å§‹" },
            { name: "å¤„æš‘", date: "2025-08-23", description: "æš‘çƒ­ç»“æŸ" },
            { name: "ç™½éœ²", date: "2025-09-07", description: "éœ²æ°´å‡ç»“" },
            { name: "ç§‹åˆ†", date: "2025-09-23", description: "æ˜¼å¤œå¹³åˆ†" },
            { name: "å¯’éœ²", date: "2025-10-08", description: "éœ²æ°´æ›´å‡‰" },
            { name: "éœœé™", date: "2025-10-23", description: "å¼€å§‹æœ‰éœœ" },
            { name: "ç«‹å†¬", date: "2025-11-07", description: "å†¬å­£å¼€å§‹" },
            { name: "å°é›ª", date: "2025-11-22", description: "å¼€å§‹ä¸‹é›ª" },
            { name: "å¤§é›ª", date: "2025-12-07", description: "é›ªé‡å¢å¤š" },
            { name: "å†¬è‡³", date: "2025-12-21", description: "ç™½æ˜¼æœ€çŸ­" },
            { name: "å°å¯’", date: "2025-01-05", description: "å¤©æ°”å¯’å†·" },
            { name: "å¤§å¯’", date: "2025-01-20", description: "æœ€å†·æ—¶æœŸ" }
        ];

        let currentDate = new Date();
        let selectedDate = null;

        // åˆå§‹åŒ–é¡µé¢
        function initPage() {
            updateCurrentTime();
            setInterval(updateCurrentTime, 1000);
            displaySolarTerms();
            generateCalendar(currentDate.getFullYear(), currentDate.getMonth());
        }

        // æ›´æ–°å½“å‰æ—¶é—´æ˜¾ç¤º
        function updateCurrentTime() {
            const now = new Date();
            const dateStr = now.toLocaleDateString('zh-CN', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                weekday: 'long'
            });
            const timeStr = now.toLocaleTimeString('zh-CN');
            
            const currentDateEl = document.getElementById('currentDate');
            const currentTimeEl = document.getElementById('currentTime');
            
            if (currentDateEl) currentDateEl.textContent = dateStr;
            if (currentTimeEl) currentTimeEl.textContent = timeStr;
        }

        // è®¡ç®—å€’è®¡æ—¶
        function calculateCountdown() {
            const targetDate = document.getElementById('targetDate').value;
            const targetTime = document.getElementById('targetTime').value;
            const targetDateTime = new Date(`${targetDate}T${targetTime}`);
            const now = new Date();
            
            if (targetDateTime <= now) {
                alert('è¯·é€‰æ‹©æœªæ¥çš„æ—¶é—´ï¼');
                return;
            }
            
            const diff = targetDateTime - now;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);
            
            const countdownDisplay = document.getElementById('countdownDisplay');
            const countdownItems = document.getElementById('countdownItems');
            
            if (countdownDisplay && countdownItems) {
                countdownDisplay.style.display = 'block';
                countdownDisplay.className = 'countdown-display fade-in';
                
                countdownItems.innerHTML = `
                    <div class="countdown-item">
                        <div class="number">${days}</div>
                        <div class="label">å¤©</div>
                    </div>
                    <div class="countdown-item">
                        <div class="number">${hours}</div>
                        <div class="label">å°æ—¶</div>
                    </div>
                    <div class="countdown-item">
                        <div class="number">${minutes}</div>
                        <div class="label">åˆ†é’Ÿ</div>
                    </div>
                    <div class="countdown-item">
                        <div class="number">${seconds}</div>
                        <div class="label">ç§’</div>
                    </div>
                `;
            }
        }

        // æ˜¾ç¤º24èŠ‚æ°”
        function displaySolarTerms() {
            const solarTermsList = document.getElementById('solarTermsList');
            if (!solarTermsList) return;
            
            const now = new Date();
            let html = '';
            
            solarTerms.forEach(term => {
                const termDate = new Date(term.date);
                if (termDate > now) {
                    const diff = termDate - now;
                    const days = Math.ceil(diff / (1000 * 60 * 60 * 24));
                    
                    html += `
                        <div class="solar-term fade-in">
                            <div class="name">${term.name}</div>
                            <div class="date">${termDate.toLocaleDateString('zh-CN')} (${term.description})</div>
                            <div class="countdown">è¿˜æœ‰ ${days} å¤©</div>
                        </div>
                    `;
                }
            });
            
            solarTermsList.innerHTML = html;
        }

        // ç”Ÿæˆæœˆå†
        function generateCalendar(year, month) {
            const calendarGrid = document.getElementById('calendarGrid');
            const calendarTitle = document.getElementById('calendarTitle');
            
            if (!calendarGrid || !calendarTitle) return;
            
            const today = new Date();
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();
            const startingDayOfWeek = firstDay.getDay();
            
            calendarTitle.textContent = `${year}å¹´${month + 1}æœˆ`;
            
            let html = '';
            
            // æ˜ŸæœŸæ ‡é¢˜
            const weekdays = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
            weekdays.forEach(day => {
                html += `<div class="calendar-day calendar-day-header">${day}</div>`;
            });
            
            // ä¸Šä¸ªæœˆçš„æ—¥æœŸ
            const prevMonthLastDay = new Date(year, month, 0).getDate();
            for (let i = startingDayOfWeek - 1; i >= 0; i--) {
                const day = prevMonthLastDay - i;
                const prevMonthDate = new Date(year, month - 1, day);
                const lunar = getLunarDate(prevMonthDate);
                html += `<div class="calendar-day other-month">
                    <div class="day-number">${day}</div>
                    <div class="day-info">${lunar.day}</div>
                </div>`;
            }
            
            // å½“å‰æœˆçš„æ—¥æœŸ
            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(year, month, day);
                const isToday = date.toDateString() === today.toDateString();
                const isWeekend = date.getDay() === 0 || date.getDay() === 6;
                const lunar = getLunarDate(date);
                
                let classes = 'calendar-day';
                if (isToday) classes += ' today';
                if (isWeekend) classes += ' weekend';
                if (selectedDate && date.toDateString() === selectedDate.toDateString()) {
                    classes += ' selected';
                }
                
                html += `<div class="${classes}" onclick="selectDate(${year}, ${month}, ${day})">
                    <div class="day-number">${day}</div>
                    <div class="day-info">${lunar.day}</div>
                </div>`;
            }
            
            // ä¸‹ä¸ªæœˆçš„æ—¥æœŸ
            const totalCells = 42; // 6è¡Œ7åˆ—
            const remainingCells = totalCells - (startingDayOfWeek + daysInMonth);
            for (let day = 1; day <= remainingCells; day++) {
                const nextMonthDate = new Date(year, month + 1, day);
                const lunar = getLunarDate(nextMonthDate);
                html += `<div class="calendar-day other-month">
                    <div class="day-number">${day}</div>
                    <div class="day-info">${lunar.day}</div>
                </div>`;
            }
            
            calendarGrid.innerHTML = html;
        }

        // é€‰æ‹©æ—¥æœŸ
        function selectDate(year, month, day) {
            selectedDate = new Date(year, month, day);
            generateCalendar(year, month);
            
            const selectedDateInfo = document.getElementById('selectedDateInfo');
            const selectedDateTitle = document.getElementById('selectedDateTitle');
            const selectedDateCountdown = document.getElementById('selectedDateCountdown');
            
            if (!selectedDateInfo || !selectedDateTitle || !selectedDateCountdown) return;
            
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            
            const diff = selectedDate - today;
            const days = Math.ceil(diff / (1000 * 60 * 60 * 24));
            
            let message = '';
            if (days === 0) {
                message = 'å°±æ˜¯ä»Šå¤©ï¼';
            } else if (days > 0) {
                message = `è¿˜æœ‰ ${days} å¤©`;
            } else {
                message = `å·²ç»è¿‡å» ${Math.abs(days)} å¤©`;
            }
            
            selectedDateTitle.textContent = `${year}å¹´${month + 1}æœˆ${day}æ—¥`;
            selectedDateCountdown.textContent = message;
            selectedDateInfo.style.display = 'block';
            selectedDateInfo.className = 'fade-in';
        }

        // åˆ‡æ¢æœˆä»½
        function changeMonth(direction) {
            if (direction === 0) {
                currentDate = new Date();
            } else {
                currentDate.setMonth(currentDate.getMonth() + direction);
            }
            
            generateCalendar(currentDate.getFullYear(), currentDate.getMonth());
            
            const selectedDateInfo = document.getElementById('selectedDateInfo');
            if (selectedDateInfo) {
                selectedDateInfo.style.display = 'none';
            }
            selectedDate = null;
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', initPage);
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¿è¿çœ‹ - å¤šæ ·å›¾æ¡ˆä¸éš¾åº¦é€‰æ‹©çš„ç›Šæ™ºæ¸¸æˆ</title>
    <style>
        body {
            font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            color: #fff;
        }
        
        h1 {
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 10px;
            font-size: 2.5em;
            color: #fff;
            font-weight: bold;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .game-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 90vw;
        }
        
        .settings {
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            text-align: center;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }
        
        .setting-group {
            margin: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .setting-group label {
            margin-bottom: 8px;
            font-weight: bold;
            font-size: 1.1em;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
        }
        
        .setting-group select {
            padding: 8px 12px;
            border-radius: 25px;
            border: 2px solid #ffd700;
            background: rgba(255, 255, 255, 0.9);
            font-size: 1em;
            outline: none;
            transition: all 0.3s ease;
            min-width: 150px;
        }
        
        .setting-group select:focus {
            border-color: #ff6b6b;
            box-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
            transform: scale(1.05);
        }
        
        .game-board {
            display: grid;
            grid-template-columns: repeat(8, 60px);
            grid-gap: 5px;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 15px;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.2);
            justify-content: center;
        }
        
        .tile {
            width: 60px;
            height: 60px;
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border-radius: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 28px;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }
        
        .tile::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: rotate(45deg);
            transition: all 0.5s ease;
            opacity: 0;
        }
        
        .tile:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
            z-index: 10;
        }
        
        .tile:hover::before {
            opacity: 1;
            animation: shine 0.5s ease;
        }
        
        @keyframes shine {
            0% { transform: rotate(45deg) translate(-100%, -100%); }
            100% { transform: rotate(45deg) translate(100%, 100%); }
        }
        
        .tile.selected {
            background: linear-gradient(145deg, #ffeb3b, #ffc107);
            transform: scale(1.15) rotate(10deg);
            box-shadow: 0 0 20px rgba(255, 235, 59, 0.7);
            animation: pulse 0.5s ease-in-out;
        }
        
        @keyframes pulse {
            0% { transform: scale(1.15) rotate(10deg); }
            50% { transform: scale(1.3) rotate(-5deg); }
            100% { transform: scale(1.15) rotate(10deg); }
        }
        
        .tile.matched {
            transform: scale(0);
            opacity: 0;
            transition: all 0.5s ease;
        }
        
        .controls {
            margin-top: 25px;
            text-align: center;
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 12px 25px;
            font-size: 1.1em;
            background: linear-gradient(45deg, #ff6b6b, #ffa502);
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            margin: 0 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        button:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        .message {
            margin-top: 25px;
            font-size: 1.3em;
            font-weight: bold;
            text-align: center;
            min-height: 30px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* è£…é¥°å…ƒç´  */
        .decoration {
            position: absolute;
            pointer-events: none;
            z-index: -1;
        }
        
        .decoration.circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: float 6s ease-in-out infinite;
        }
        
        .decoration.triangle {
            width: 0;
            height: 0;
            border-left: 50px solid transparent;
            border-right: 50px solid transparent;
            border-bottom: 100px solid rgba(255,255,255,0.05);
            animation: rotate 8s linear infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <h1>è¿è¿çœ‹å°æ¸¸æˆ</h1>
    <div class="game-container">
        <div class="settings">
            <div class="setting-group">
                <label for="patternType">å›¾æ¡ˆç±»å‹:</label>
                <select id="patternType">
                    <option value="emoji">è¡¨æƒ…ç¬¦å·</option>
                    <option value="number">æ•°å­—</option>
                    <option value="letter">å­—æ¯</option>
                </select>
            </div>
            <div class="setting-group">
                <label for="boardSize">æ¸¸æˆæ¿å¤§å°:</label>
                <select id="boardSize">
                    <option value="4">4x4 (8å¯¹)</option>
                    <option value="6">6x6 (18å¯¹)</option>
                    <option value="8" selected>8x8 (32å¯¹)</option>
                    <option value="10">10x10 (50å¯¹)</option>
                    <option value="12">12x12 (72å¯¹)</option>
                </select>
            </div>
            <div class="setting-group">
                <label for="difficulty">éš¾åº¦é€‰æ‹©:</label>
                <select id="difficulty">
                    <option value="none">ä¸è®¡æ—¶</option>
                    <option value="easy">ç®€å• (300ç§’)</option>
                    <option value="medium">ä¸­ç­‰ (180ç§’)</option>
                    <option value="hard">å›°éš¾ (120ç§’)</option>
                    <option value="expert">ä¸“å®¶ (60ç§’)</option>
                </select>
            </div>
            <button onclick="applySettings()">åº”ç”¨è®¾ç½®</button>
        </div>
        <div class="game-board" id="gameBoard"></div>
        <div class="controls">
            <button onclick="startGame()">å¼€å§‹æ¸¸æˆ</button>
            <button onclick="resetGame()">é‡æ–°å¼€å§‹</button>
        </div>
        <div class="message" id="message"></div>
    </div>
    
    <!-- è£…é¥°å…ƒç´  -->
    <div class="decoration circle" style="top: 10%; left: 5%;"></div>
    <div class="decoration circle" style="top: 20%; right: 10%;"></div>
    <div class="decoration triangle" style="bottom: 15%; left: 15%;"></div>
    <div class="decoration triangle" style="bottom: 25%; right: 20%;"></div>

    <script>
        // æ¸¸æˆå˜é‡
        const emojiPatterns = ['ğŸ', 'ğŸŒ', 'ğŸ‡', 'ğŸŠ', 'ğŸ“', 'ğŸ’', 'ğŸ‘', 'ğŸ', 'ğŸ¥', 'ğŸ¥­', 'ğŸ‹', 'ğŸ‰', 'ğŸ¥¥', 'ğŸ‡', 'ğŸˆ', 'ğŸ'];
        const numberPatterns = ['1ï¸âƒ£', '2ï¸âƒ£', '3ï¸âƒ£', '4ï¸âƒ£', '5ï¸âƒ£', '6ï¸âƒ£', '7ï¸âƒ£', '8ï¸âƒ£', '9ï¸âƒ£', '0ï¸âƒ£', 'ğŸ”¢', 'ğŸ’¯', 'âœ…', 'âŒ', 'â—', 'â“'];
        const letterPatterns = ['ğŸ‡¦', 'ğŸ‡§', 'ğŸ‡¨', 'ğŸ‡©', 'ğŸ‡ª', 'ğŸ‡«', 'ğŸ‡¬', 'ğŸ‡­', 'ğŸ‡®', 'ğŸ‡¯', 'ğŸ‡°', 'ğŸ‡±', 'ğŸ‡²', 'ğŸ‡³', 'ğŸ‡´', 'ğŸ‡µ'];
        let patterns = [];
        let board = [];
        let selectedTiles = [];
        let gameStarted = false;
        let boardSize = 8; // é»˜è®¤8x8
        let timer = null;
        let timeLeft = 0;
        let totalTime = 0;
        let difficulty = 'none'; // é»˜è®¤ä¸è®¡æ—¶

        // åº”ç”¨è®¾ç½®
        function applySettings() {
            if (gameStarted) {
                alert('æ¸¸æˆè¿›è¡Œä¸­ï¼Œè¯·å…ˆé‡æ–°å¼€å§‹æ¸¸æˆå†æ›´æ”¹è®¾ç½®');
                return;
            }
            
            const patternType = document.getElementById('patternType').value;
            boardSize = parseInt(document.getElementById('boardSize').value);
            difficulty = document.getElementById('difficulty').value;
            
            // æ ¹æ®é€‰æ‹©è®¾ç½®å›¾æ¡ˆ
            switch(patternType) {
                case 'emoji':
                    patterns = [...emojiPatterns];
                    break;
                case 'number':
                    patterns = [...numberPatterns];
                    break;
                case 'letter':
                    patterns = [...letterPatterns];
                    break;
            }
            
            // è®¾ç½®è®¡æ—¶æ—¶é—´
            switch(difficulty) {
                case 'easy':
                    totalTime = 300; // 5åˆ†é’Ÿ
                    break;
                case 'medium':
                    totalTime = 180; // 3åˆ†é’Ÿ
                    break;
                case 'hard':
                    totalTime = 120; // 2åˆ†é’Ÿ
                    break;
                case 'expert':
                    totalTime = 60; // 1åˆ†é’Ÿ
                    break;
                default:
                    totalTime = 0; // ä¸è®¡æ—¶
            }
            
            // åˆå§‹åŒ–æ¸¸æˆ
            initGame();
            
            // åº”ç”¨è®¾ç½®åéœ€è¦ç‚¹å‡»å¼€å§‹æ¸¸æˆæŒ‰é’®æ‰èƒ½å¼€å§‹
            document.getElementById('message').textContent = 'è®¾ç½®å·²åº”ç”¨ï¼Œè¯·ç‚¹å‡»"å¼€å§‹æ¸¸æˆ"æŒ‰é’®å¼€å§‹æ¸¸æˆ';
        }

        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            const gameBoard = document.getElementById('gameBoard');
            
            // æ ¹æ®æ¸¸æˆæ¿å¤§å°è®¾ç½®ç½‘æ ¼åˆ—æ•°
            gameBoard.style.gridTemplateColumns = `repeat(${boardSize}, 50px)`;
            
            gameBoard.innerHTML = '';
            board = [];
            selectedTiles = [];
            
            // è®¡ç®—éœ€è¦çš„å›¾æ¡ˆå¯¹æ•°
            const pairsNeeded = (boardSize * boardSize) / 2;
            
            // åˆ›å»ºå›¾æ¡ˆæ•°ç»„ï¼ˆæ¯ç§å›¾æ¡ˆ2ä¸ªï¼‰
            let patternArray = [];
            
            // æ ¹æ®éœ€è¦çš„å¯¹æ•°é€‰æ‹©å›¾æ¡ˆ
            for (let i = 0; i < pairsNeeded; i++) {
                const pattern = patterns[i % patterns.length];
                patternArray.push(pattern, pattern);
            }
            
            // éšæœºæ‰“ä¹±å›¾æ¡ˆ
            patternArray = shuffleArray(patternArray);
            
            // åˆ›å»ºæ¸¸æˆæ¿
            for (let i = 0; i < boardSize * boardSize; i++) {
                const tile = document.createElement('div');
                tile.className = 'tile';
                tile.dataset.index = i;
                tile.dataset.pattern = patternArray[i];
                // æ˜æ£‹æ¨¡å¼ï¼šåˆå§‹åŒ–æ—¶å°±æ˜¾ç¤ºå›¾æ¡ˆ
                tile.textContent = patternArray[i];
                tile.addEventListener('click', () => handleTileClick(tile));
                gameBoard.appendChild(tile);
                board.push({
                    element: tile,
                    pattern: patternArray[i],
                    matched: false
                });
            }
            
            document.getElementById('message').textContent = 'è®¾ç½®å·²åº”ç”¨ï¼Œè¯·ç‚¹å‡»"å¼€å§‹æ¸¸æˆ"æŒ‰é’®å¼€å§‹æ¸¸æˆ';
        }

        // æ´—ç‰Œç®—æ³•
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // å¼€å§‹æ¸¸æˆ
        function startGame() {
            // æ£€æŸ¥æ˜¯å¦å·²åº”ç”¨è®¾ç½®
            if (patterns.length === 0) {
                document.getElementById('message').textContent = 'è¯·å…ˆåº”ç”¨è®¾ç½®å†å¼€å§‹æ¸¸æˆ';
                return;
            }
            
            if (gameStarted) return;
            
            gameStarted = true;
            
            // å¦‚æœé€‰æ‹©äº†è®¡æ—¶æ¨¡å¼ï¼Œå¯åŠ¨è®¡æ—¶å™¨
            if (totalTime > 0) {
                timeLeft = totalTime;
                updateTimerDisplay();
                timer = setInterval(updateTimer, 1000);
                document.getElementById('message').textContent = `æ¸¸æˆè¿›è¡Œä¸­... å‰©ä½™æ—¶é—´: ${timeLeft}ç§’`;
            } else {
                document.getElementById('message').textContent = 'æ¸¸æˆè¿›è¡Œä¸­...';
            }
        }

        // å¤„ç†æ–¹å—ç‚¹å‡»
        function handleTileClick(tile) {
            if (!gameStarted || tile.classList.contains('matched')) return;
            
            const index = parseInt(tile.dataset.index);
            
            // å¦‚æœå·²ç»é€‰ä¸­ä¸¤ä¸ªæ–¹å—ï¼Œé‡ç½®é€‰æ‹©
            if (selectedTiles.length >= 2) {
                selectedTiles.forEach(t => t.element.classList.remove('selected'));
                selectedTiles = [];
            }
            
            // é€‰ä¸­å½“å‰æ–¹å—
            tile.classList.add('selected');
            // æ·»åŠ ç‚¹å‡»åŠ¨ç”»æ•ˆæœ
            tile.style.transform = 'scale(1.2) rotate(15deg)';
            setTimeout(() => {
                if (tile.classList.contains('selected')) {
                    tile.style.transform = '';
                }
            }, 200);
            
            // æ˜æ£‹æ¨¡å¼ï¼šå›¾æ¡ˆå·²ç»å¯è§ï¼Œæ— éœ€é¢å¤–æ˜¾ç¤º
            selectedTiles.push({
                element: tile,
                index: index,
                pattern: board[index].pattern
            });
            
            // æ£€æŸ¥æ˜¯å¦åŒ¹é…
            if (selectedTiles.length === 2) {
                setTimeout(checkMatch, 500);
            }
        }

        // æ£€æŸ¥æ˜¯å¦åŒ¹é…
        function checkMatch() {
            if (selectedTiles.length !== 2) return;
            
            const [tile1, tile2] = selectedTiles;
            
            if (tile1.pattern === tile2.pattern && tile1.index !== tile2.index) {
                // åŒ¹é…æˆåŠŸ
                tile1.element.classList.remove('selected');
                tile2.element.classList.remove('selected');
                tile1.element.classList.add('matched');
                tile2.element.classList.add('matched');
                
                board[tile1.index].matched = true;
                board[tile2.index].matched = true;
                
                // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸ
                checkGameEnd();
            } else {
                // åŒ¹é…å¤±è´¥
                tile1.element.classList.remove('selected');
                tile2.element.classList.remove('selected');
                
                // æ˜æ£‹æ¨¡å¼ï¼šå›¾æ¡ˆä¿æŒå¯è§
            }
            
            selectedTiles = [];
        }

        // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸ
        function checkGameEnd() {
            const allMatched = board.every(tile => tile.matched);
            if (allMatched) {
                // æ¸…é™¤è®¡æ—¶å™¨
                if (timer) {
                    clearInterval(timer);
                    timer = null;
                }
                document.getElementById('message').textContent = 'æ­å–œä½ ï¼Œå®Œæˆæ¸¸æˆï¼';
                gameStarted = false;
            }
        }

        // æ›´æ–°è®¡æ—¶å™¨æ˜¾ç¤º
        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('message').textContent = `æ¸¸æˆè¿›è¡Œä¸­... å‰©ä½™æ—¶é—´: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
        }
        
        // æ›´æ–°è®¡æ—¶å™¨
        function updateTimer() {
            timeLeft--;
            updateTimerDisplay();
            
            // æ—¶é—´åˆ°ï¼Œæ¸¸æˆç»“æŸ
            if (timeLeft <= 0) {
                clearInterval(timer);
                gameStarted = false;
                document.getElementById('message').textContent = 'æ—¶é—´åˆ°ï¼Œæ¸¸æˆç»“æŸ!';
            }
        }
        
        // é‡æ–°å¼€å§‹æ¸¸æˆ
        function resetGame() {
            // æ¸…é™¤è®¡æ—¶å™¨
            if (timer) {
                clearInterval(timer);
                timer = null;
            }
            gameStarted = false;
            // é‡æ–°åº”ç”¨å½“å‰è®¾ç½®
            applySettings();
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–æ¸¸æˆ
        window.onload = function() {
            // åº”ç”¨é»˜è®¤è®¾ç½®
            applySettings();
        };
    </script>
</body>
</html>
